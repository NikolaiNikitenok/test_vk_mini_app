{"ast":null,"code":"/**\r\n *  Explain UUID and link to RFC here.\r\n *\r\n *  @_subsection: api/utils:UUID  [about-uuid]\r\n */\nimport { getBytes, hexlify } from \"./data.js\";\n/**\r\n *  Returns the version 4 [[link-uuid]] for the %%randomBytes%%.\r\n *\r\n *  @see: https://www.ietf.org/rfc/rfc4122.txt (Section 4.4)\r\n */\n\nexport function uuidV4(randomBytes) {\n  const bytes = getBytes(randomBytes, \"randomBytes\"); // Section: 4.1.3:\n  // - time_hi_and_version[12:16] = 0b0100\n\n  bytes[6] = bytes[6] & 0x0f | 0x40; // Section 4.4\n  // - clock_seq_hi_and_reserved[6] = 0b0\n  // - clock_seq_hi_and_reserved[7] = 0b1\n\n  bytes[8] = bytes[8] & 0x3f | 0x80;\n  const value = hexlify(bytes);\n  return [value.substring(2, 10), value.substring(10, 14), value.substring(14, 18), value.substring(18, 22), value.substring(22, 34)].join(\"-\");\n}","map":{"version":3,"mappings":"AAAA;;;;;AAKA,SAASA,QAAT,EAAmBC,OAAnB,QAAkC,WAAlC;AAIA;;;;;;AAKA,OAAM,SAAUC,MAAV,CAAiBC,WAAjB,EAAuC;AACzC,QAAMC,KAAK,GAAGJ,QAAQ,CAACG,WAAD,EAAc,aAAd,CAAtB,CADyC,CAGzC;AACA;;AACAC,OAAK,CAAC,CAAD,CAAL,GAAYA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAZ,GAAoB,IAA/B,CALyC,CAOzC;AACA;AACA;;AACAA,OAAK,CAAC,CAAD,CAAL,GAAYA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAZ,GAAoB,IAA/B;AAEA,QAAMC,KAAK,GAAGJ,OAAO,CAACG,KAAD,CAArB;AAEA,SAAO,CACJC,KAAK,CAACC,SAAN,CAAgB,CAAhB,EAAmB,EAAnB,CADI,EAEJD,KAAK,CAACC,SAAN,CAAgB,EAAhB,EAAoB,EAApB,CAFI,EAGJD,KAAK,CAACC,SAAN,CAAgB,EAAhB,EAAoB,EAApB,CAHI,EAIJD,KAAK,CAACC,SAAN,CAAgB,EAAhB,EAAoB,EAApB,CAJI,EAKJD,KAAK,CAACC,SAAN,CAAgB,EAAhB,EAAoB,EAApB,CALI,EAMLC,IANK,CAMA,GANA,CAAP;AAOH","names":["getBytes","hexlify","uuidV4","randomBytes","bytes","value","substring","join"],"sourceRoot":"","sources":["../../src.ts/utils/uuid.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}