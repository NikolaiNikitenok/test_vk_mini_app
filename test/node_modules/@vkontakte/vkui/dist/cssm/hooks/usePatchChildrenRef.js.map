{"version":3,"sources":["../../../src/hooks/usePatchChildrenRef.ts"],"names":["React","useExternRef","warnOnce","isDOMTypeElement","element","type","warn","usePatchChildrenRef","children","childRef","isValidElement","ref","props","getRootRef","patchedRef","useEffect","current","process","env","NODE_ENV","cloneElement"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,QAAT;;AAIA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CACvBC,OADuB,EAEmB;AAC1C,SAAO,OAAOA,OAAO,CAACC,IAAf,KAAwB,QAA/B;AACD,CAJD;;AAMA,IAAMC,IAAI,GAAGJ,QAAQ,CAAC,qBAAD,CAArB;AACA,OAAO,IAAMK,mBAAmB,GAAG,SAAtBA,mBAAsB,CACjCC,QADiC,EAEsC;AACvE,MAAMC,QAAQ,GACZ,aAAAT,KAAK,CAACU,cAAN,CAAqBF,QAArB,MACCL,gBAAgB,CAACK,QAAD,CAAhB,GACIA,QAAQ,CAACG,GADb,GAEGH,QAAQ,CAACI,KAAT,CAAeC,UAHnB,CADF;AAKA,MAAMC,UAAU,GAAGb,YAAY,CAAIQ,QAAJ,CAA/B;AACAT,EAAAA,KAAK,CAACe,SAAN,CAAgB,YAAM;AACpB,QAAI,CAACD,UAAU,CAACE,OAAZ,IAAuBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAApD,EAAmE;AACjEb,MAAAA,IAAI,CACF,wGACE,0DAFA,CAAJ;AAID;AACF,GAPD,EAOG,CAACE,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEH,IAAX,EAAiBS,UAAjB,CAPH;AAQA,SAAO,CACLA,UADK,EAEL,aAAAd,KAAK,CAACU,cAAN,CAAqBF,QAArB,iBACIR,KAAK,CAACoB,YAAN,CAAmBZ,QAAnB,sBACGL,gBAAgB,CAACK,QAAD,CAAhB,GAA6B,KAA7B,GAAqC,YADxC,EACuDM,UADvD,EADJ,GAIIN,QANC,CAAP;AAQD,CAzBM","sourcesContent":["import * as React from \"react\";\nimport { useExternRef } from \"./useExternRef\";\nimport { warnOnce } from \"../lib/warnOnce\";\n\ntype ChildrenElement<T> = React.ReactElement<{ getRootRef?: React.Ref<T> }>;\n\nconst isDOMTypeElement = (\n  element: React.ReactElement\n): element is React.DOMElement<any, any> => {\n  return typeof element.type === \"string\";\n};\n\nconst warn = warnOnce(\"usePatchChildrenRef\");\nexport const usePatchChildrenRef = <T = HTMLElement>(\n  children?: ChildrenElement<T>\n): [React.MutableRefObject<T | null>, ChildrenElement<T> | undefined] => {\n  const childRef =\n    React.isValidElement(children) &&\n    (isDOMTypeElement(children)\n      ? (children.ref as React.Ref<T>)\n      : children.props.getRootRef);\n  const patchedRef = useExternRef<T>(childRef);\n  React.useEffect(() => {\n    if (!patchedRef.current && process.env.NODE_ENV === \"development\") {\n      warn(\n        \"Кажется, в `children` передан компонент, который не поддерживает свойство `getRootRef`. Мы не можем\" +\n          \"получить ссылку на корневой dom-элемент этого компонента\"\n      );\n    }\n  }, [children?.type, patchedRef]);\n  return [\n    patchedRef,\n    React.isValidElement(children)\n      ? React.cloneElement(children, {\n          [isDOMTypeElement(children) ? \"ref\" : \"getRootRef\"]: patchedRef,\n        })\n      : children,\n  ];\n};\n"],"file":"usePatchChildrenRef.js"}