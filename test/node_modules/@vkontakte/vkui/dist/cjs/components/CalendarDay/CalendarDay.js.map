{"version":3,"sources":["../../../../src/components/CalendarDay/CalendarDay.tsx"],"names":["CalendarDay","React","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","locale","useContext","LocaleProviderContext","ref","useRef","onClick","useCallback","handleEnter","handleLeave","useEffect","current","dispatchEvent","Event","ENABLE_KEYBOARD_INPUT_EVENT_NAME","bubbles","focus","Intl","DateTimeFormat","weekday","year","month","format","getDate","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport Tappable from \"../Tappable/Tappable\";\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from \"../../hooks/useKeyboardInputTracker\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport \"./CalendarDay.css\";\n\nexport interface CalendarDayProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: \"s\" | \"m\";\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay: React.FC<CalendarDayProps> = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n  }) => {\n    const locale = React.useContext(LocaleProviderContext);\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(\n          new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true })\n        );\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div vkuiClass=\"CalendarDay__hidden\"></div>;\n    }\n\n    return (\n      <Tappable\n        vkuiClass={classNames(\"CalendarDay\", `CalendarDay--size-${size}`, {\n          \"CalendarDay--today\": today,\n          \"CalendarDay--selected\": selected && !disabled,\n          \"CalendarDay--active\": active && !disabled,\n          \"CalendarDay--selection-start\": selectionStart,\n          \"CalendarDay--selection-end\": selectionEnd,\n          \"CalendarDay--disabled\": disabled,\n          \"CalendarDay--not-same-month\": !sameMonth,\n        })}\n        hoverMode={active ? \"CalendarDay--active-hover\" : \"CalendarDay--hover\"}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        aria-label={new Intl.DateTimeFormat(locale, {\n          weekday: \"long\",\n          year: \"numeric\",\n          month: \"long\",\n          day: \"numeric\",\n        }).format(day)}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? \"outside\" : \"inside\"}\n        onEnter={handleEnter}\n        onLeave={handleLeave}\n      >\n        <div\n          vkuiClass={classNames(\"CalendarDay__hinted\", {\n            \"CalendarDay__hinted--active\": hinted,\n            \"CalendarDay__hinted--selection-start\": hintedSelectionStart,\n            \"CalendarDay__hinted--selection-end\": hintedSelectionEnd,\n          })}\n        >\n          <div\n            vkuiClass={classNames(\"CalendarDay__inner\", {\n              \"CalendarDay__inner--active\": active && !disabled,\n            })}\n          >\n            <div vkuiClass=\"CalendarDay__day-number\">{day.getDate()}</div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  }\n);\n\nCalendarDay.displayName = \"CalendarDay\";\n"],"file":"CalendarDay.js"}