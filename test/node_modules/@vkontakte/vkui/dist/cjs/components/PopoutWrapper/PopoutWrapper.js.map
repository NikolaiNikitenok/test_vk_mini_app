{"version":3,"sources":["../../../../src/components/PopoutWrapper/PopoutWrapper.tsx"],"names":["PopoutWrapper","alignY","alignX","closing","hasMask","fixed","children","onClick","restProps","platform","React","useState","opened","setOpened","elRef","useRef","onFadeInEnd","e","animationName","animationFinishFallback","IOS","useEffect","set","window","preventDefault","passive","baseClassNames","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAYO,IAAMA,aAA2C,GAAG,SAA9CA,aAA8C,OASjC;AAAA,yBARxBC,MAQwB;AAAA,MARxBA,MAQwB,4BARf,QAQe;AAAA,yBAPxBC,MAOwB;AAAA,MAPxBA,MAOwB,4BAPf,QAOe;AAAA,0BANxBC,OAMwB;AAAA,MANxBA,OAMwB,6BANd,KAMc;AAAA,0BALxBC,OAKwB;AAAA,MALxBA,OAKwB,6BALd,IAKc;AAAA,wBAJxBC,KAIwB;AAAA,MAJxBA,KAIwB,2BAJhB,IAIgB;AAAA,MAHxBC,QAGwB,QAHxBA,QAGwB;AAAA,MAFxBC,OAEwB,QAFxBA,OAEwB;AAAA,MADrBC,SACqB;AACxB,MAAMC,QAAQ,GAAG,+BAAjB;;AACA,wBAA4BC,KAAK,CAACC,QAAN,CAAe,CAACP,OAAhB,CAA5B;AAAA;AAAA,MAAOQ,MAAP;AAAA,MAAeC,SAAf;;AACA,MAAMC,KAAK,GAAGJ,KAAK,CAACK,MAAN,CAA6B,IAA7B,CAAd;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAA8B;AAChD,QAAI,CAACA,CAAD,IAAMA,CAAC,CAACC,aAAF,KAAoB,6BAA9B,EAA6D;AAC3DL,MAAAA,SAAS,CAAC,IAAD,CAAT;AACD;AACF,GAJD;;AAKA,MAAMM,uBAAuB,GAAG,4BAC9BH,WAD8B,EAE9BP,QAAQ,KAAKW,aAAb,GAAmB,GAAnB,GAAyB,GAFK,CAAhC;AAIAV,EAAAA,KAAK,CAACW,SAAN,CAAgB,YAAM;AACpB,KAACT,MAAD,IAAWO,uBAAuB,CAACG,GAAxB,EAAX;AACD,GAFD,EAEG,CAACH,uBAAD,EAA0BP,MAA1B,CAFH;;AAIA,gBAAmB,kBAAnB;AAAA,MAAQW,MAAR,WAAQA,MAAR;;AACA,sDAAuBA,MAAvB,EAA+B,WAA/B,EAA4C,UAACN,CAAD;AAAA,WAAOA,CAAC,CAACO,cAAF,EAAP;AAAA,GAA5C,EAAuE;AACrEC,IAAAA,OAAO,EAAE;AAD4D,GAAvE;AAIA,MAAMC,cAAc,GAAG,gCAAa,eAAb,EAA8BjB,QAA9B,CAAvB;AAEA,SACE,uEACMD,SADN;AAEE,IAAA,SAAS,EAAE,4BACTkB,cADS,6BAEWzB,MAFX,8BAGWC,MAHX,GAIT;AACE,gCAA0BC,OAD5B;AAEE,+BAAyBS,MAF3B;AAGE,8BAAwBP,KAH1B;AAIE,+BAAyBD;AAJ3B,KAJS,CAFb;AAaE,IAAA,cAAc,EAAEQ,MAAM,GAAGe,SAAH,GAAeX,WAbvC;AAcE,IAAA,GAAG,EAAEF;AAdP,MAgBE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,OAAO,EAAEP;AAAjD,IADF,EAEE;AAAK,IAAA,SAAS,EAAC;AAAf,KAAyCD,QAAzC,CAFF,CAhBF,CADF;AAuBD,CAzDM","sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS } from \"../../lib/platform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nimport \"./PopoutWrapper.css\";\n\nexport interface PopoutWrapperProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: \"top\" | \"center\" | \"bottom\";\n  alignX?: \"left\" | \"center\" | \"right\";\n  closing?: boolean;\n}\n\nexport const PopoutWrapper: React.FC<PopoutWrapperProps> = ({\n  alignY = \"center\",\n  alignX = \"center\",\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n  const elRef = React.useRef<HTMLDivElement>(null);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === \"vkui-animation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(\n    onFadeInEnd,\n    platform === IOS ? 300 : 200\n  );\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, \"touchmove\", (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  const baseClassNames = getClassName(\"PopoutWrapper\", platform);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\n        baseClassNames,\n        `PopoutWrapper--v-${alignY}`,\n        `PopoutWrapper--h-${alignX}`,\n        {\n          \"PopoutWrapper--closing\": closing,\n          \"PopoutWrapper--opened\": opened,\n          \"PopoutWrapper--fixed\": fixed,\n          \"PopoutWrapper--masked\": hasMask,\n        }\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n      ref={elRef}\n    >\n      <div vkuiClass=\"PopoutWrapper__container\">\n        <div vkuiClass=\"PopoutWrapper__overlay\" onClick={onClick} />\n        <div vkuiClass=\"PopoutWrapper__content\">{children}</div>\n      </div>\n    </div>\n  );\n};\n"],"file":"PopoutWrapper.js"}