"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.asyncImportLoader = void 0;

/**
 * Loads async import with retries. It can be useful for bad internet connection
 *
 * @example
 * const HeaderLazyComponent = React.lazy(() => asyncImportLoader(() => import('../components/Header/Header')));
 *
 * @example
 * asyncImportLoader(() => import('some-module'), 20).then((someModule) => {
 *   someModule.init();
 * });
 */
var asyncImportLoader = function asyncImportLoader(asyncImport) {
  var attempts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
  return new Promise(function (resolve, reject) {
    asyncImport().then(resolve)["catch"](function (error) {
      setTimeout(function () {
        if (attempts === 0) {
          reject(error);
          return;
        }

        asyncImportLoader(asyncImport, attempts - 1).then(resolve, reject);
      }, 1000);
    });
  });
};

exports.asyncImportLoader = asyncImportLoader;
//# sourceMappingURL=async.js.map