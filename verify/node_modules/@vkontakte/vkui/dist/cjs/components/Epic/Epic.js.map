{"version":3,"sources":["../../../../src/components/Epic/Epic.tsx"],"names":["warn","Epic","props","platform","scroll","React","useRef","current","activeStory","tabbar","children","viewWidth","restProps","process","env","NODE_ENV","ViewWidth","SMALL_TABLET","story","Children","toArray","find","isValidElement","value"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;AAcA,IAAMA,IAAI,GAAG,wBAAS,MAAT,CAAb;;AAEO,IAAMC,IAAsD,GAAG,SAAzDA,IAAyD,CACpEC,KADoE,EAEjE;AAAA;;AACH,MAAMC,QAAQ,GAAG,+BAAjB;AACA,MAAMC,MAAM,GAAGC,KAAK,CAACC,MAAN,CAAwC,EAAxC,EAA4CC,OAA3D;AACA,MAAQC,WAAR,GAAmEN,KAAnE,CAAQM,WAAR;AAAA,MAAqBC,MAArB,GAAmEP,KAAnE,CAAqBO,MAArB;AAAA,MAA6BC,QAA7B,GAAmER,KAAnE,CAA6BQ,QAA7B;AAAA,MAAuCC,SAAvC,GAAmET,KAAnE,CAAuCS,SAAvC;AAAA,MAAqDC,SAArD,0CAAmEV,KAAnE;;AAEA,MACEW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IACA,CAACN,MADD,IAEAE,SAAS,GAAGK,0BAAUC,YAHxB,EAIE;AACAjB,IAAAA,IAAI,CAAC,wDAAD,CAAJ;AACD;;AACD,MAAMkB,KAAK,WACRb,KAAK,CAACc,QAAN,CAAeC,OAAf,CAAuBV,QAAvB,EAAiCW,IAAjC,CACC,UAACH,KAAD;AAAA,WACE,aAAAb,KAAK,CAACiB,cAAN,CAAqBJ,KAArB,KACA,wBAASA,KAAK,CAAChB,KAAf,EAAsBF,IAAtB,MAAgCQ,WAFlC;AAAA,GADD,CADQ,uCAK+B,IAL1C;AAOA,SACE,uEAASI,SAAT;AAAoB,IAAA,SAAS,EAAE,gCAAa,MAAb,EAAqBT,QAArB;AAA/B,MACE,qCAAC,wBAAD;AACE,IAAA,GAAG,EAAEK,WADP;AAEE,IAAA,aAAa,EAAEJ,MAAM,CAACI,WAAD,CAAN,IAAuB,CAFxC;AAGE,IAAA,UAAU,EAAE,oBAACe,KAAD;AAAA,aAAYnB,MAAM,CAACI,WAAD,CAAN,GAAsBe,KAAlC;AAAA;AAHd,KAKGL,KALH,CADF,EAQGT,MARH,CADF;AAYD,CAjCM,C,CAmCP;;;;;eACe,oCAAeR,IAAf,EAAqB;AAClCU,EAAAA,SAAS,EAAE;AADuB,CAArB,C","sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport { ScrollSaver } from \"./ScrollSaver\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"./Epic.css\";\n\nexport interface EpicProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    AdaptivityProps {\n  tabbar?: React.ReactNode;\n  activeStory: string;\n}\n\nconst warn = warnOnce(\"Epic\");\n\nexport const Epic: React.FC<EpicProps & AdaptivityContextInterface> = (\n  props\n) => {\n  const platform = usePlatform();\n  const scroll = React.useRef<{ [key: string]: number }>({}).current;\n  const { activeStory, tabbar, children, viewWidth, ...restProps } = props;\n\n  if (\n    process.env.NODE_ENV === \"development\" &&\n    !tabbar &&\n    viewWidth < ViewWidth.SMALL_TABLET\n  ) {\n    warn(\"Using Epic without tabbar is not recommended on mobile\");\n  }\n  const story =\n    (React.Children.toArray(children).find(\n      (story) =>\n        React.isValidElement(story) &&\n        getNavId(story.props, warn) === activeStory\n    ) as React.ReactElement | undefined) ?? null;\n\n  return (\n    <div {...restProps} vkuiClass={getClassName(\"Epic\", platform)}>\n      <ScrollSaver\n        key={activeStory}\n        initialScroll={scroll[activeStory] || 0}\n        saveScroll={(value) => (scroll[activeStory] = value)}\n      >\n        {story}\n      </ScrollSaver>\n      {tabbar}\n    </div>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(Epic, {\n  viewWidth: true,\n});\n"],"file":"Epic.js"}