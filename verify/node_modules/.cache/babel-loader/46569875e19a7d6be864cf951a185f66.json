{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\k8909\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\GitHub\\\\test_vk_mini_app\\\\verify\\\\src\\\\panels\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport PropTypes, { string } from 'prop-types';\nimport { Panel, PanelHeader, PanelHeaderBack, Header, Button, Group, Cell, Div, Avatar, Tabs, TabsItem, List, Footer, PopoutWrapper, Textarea, Checkbox, Link, Radio, FormLayout, FormItem, Input } from '@vkontakte/vkui';\nimport { Icon28SettingsOutline, Icon28LogoVk } from '@vkontakte/icons';\nimport Web3 from 'web3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [contract, setContract] = useState('');\n  const [adress, setAdress] = useState('');\n  const [ethBalance, setEthBalance] = useState('');\n  const [ethAcc, setEthAcc] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [EthAdd, setEthAdd] = useState(false);\n  const [walletIsConnected, setWalletIsConnected] = useState(false);\n\n  const verify = async () => {\n    try {\n      const currentProvider = detectCurrentProvider();\n      const ABI = [{\n        \"inputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"_tiketStor\",\n          \"type\": \"address\"\n        }],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"constructor\"\n      }, {\n        \"inputs\": [],\n        \"name\": \"tiketStor\",\n        \"outputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      }, {\n        \"inputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"_collection\",\n          \"type\": \"address\"\n        }, {\n          \"internalType\": \"address\",\n          \"name\": \"_user\",\n          \"type\": \"address\"\n        }],\n        \"name\": \"verifier\",\n        \"outputs\": [{\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      }];\n\n      if (currentProvider) {\n        await currentProvider.request({\n          method: 'eth_requestAccounts'\n        });\n        const web3 = new Web3(currentProvider);\n        const userAccount = await web3.eth.getAccounts();\n        const account = userAccount[0];\n        let ethBalance = await web3.eth.getBalance(account);\n        console.log(account); // setDoneScreenSpinner();\n\n        setEthBalance(ethBalance);\n        setEthAcc(account);\n        setIsConnected(true);\n        const Address = \"0x59a195a6524b231Ce41F3Cbc8263d57F426E90E0\";\n        setEthAdd(Address);\n        window.web3 = await new Web3(window.ethereum);\n        window.contract = await new window.web3.eth.Contract(ABI, Address);\n        setWalletIsConnected(true); // counter\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    children: /*#__PURE__*/_jsxDEV(PanelHeader, {\n      left: /*#__PURE__*/_jsxDEV(Icon28LogoVk, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 23\n      }, this),\n      children: \" Verify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Home, \"YiqxvINiqgRLgeuBYNj+XwZVu6s=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/k8909/OneDrive/Документы/GitHub/test_vk_mini_app/verify/src/panels/Home.js"],"names":["React","useState","useEffect","PropTypes","string","Panel","PanelHeader","PanelHeaderBack","Header","Button","Group","Cell","Div","Avatar","Tabs","TabsItem","List","Footer","PopoutWrapper","Textarea","Checkbox","Link","Radio","FormLayout","FormItem","Input","Icon28SettingsOutline","Icon28LogoVk","Web3","Home","contract","setContract","adress","setAdress","ethBalance","setEthBalance","ethAcc","setEthAcc","isConnected","setIsConnected","EthAdd","setEthAdd","walletIsConnected","setWalletIsConnected","verify","currentProvider","detectCurrentProvider","ABI","request","method","web3","userAccount","eth","getAccounts","account","getBalance","console","log","Address","window","ethereum","Contract","err"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState, useEffect} from 'react';\r\nimport PropTypes, { string } from 'prop-types';\r\n\r\nimport { \r\n\tPanel, \r\n\tPanelHeader, \r\n\tPanelHeaderBack, \r\n\tHeader, \r\n\tButton, \r\n\tGroup, \r\n\tCell, \r\n\tDiv, \r\n\tAvatar, \r\n\tTabs, \r\n\tTabsItem, \r\n\tList, \r\n\tFooter, \r\n\tPopoutWrapper,\r\n\tTextarea,\r\n\tCheckbox,\r\n\tLink,\r\n\tRadio,\r\n\tFormLayout, \r\n\tFormItem, \r\n\tInput, \r\n} from '@vkontakte/vkui';\r\nimport {Icon28SettingsOutline, Icon28LogoVk} from '@vkontakte/icons';\r\nimport Web3 from 'web3';\r\n\r\nconst Home = () => {\r\n\r\n\tconst[contract, setContract] = useState('')\r\n\tconst[adress, setAdress] = useState('')\r\n\tconst[ethBalance, setEthBalance] = useState('')\r\n\tconst[ethAcc, setEthAcc] = useState('')\r\n\tconst[isConnected, setIsConnected] = useState(false)\r\n\tconst[EthAdd, setEthAdd] = useState(false)\r\n\tconst[walletIsConnected, setWalletIsConnected] = useState(false)\r\n\r\n\r\n\tconst verify = async () => {\r\n\t\ttry {\r\n\t\t\tconst currentProvider = detectCurrentProvider();\r\n\t\t\tconst ABI = [{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_tiketStor\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"tiketStor\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_collection\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"verifier\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]\r\n\r\n\t\t\tif(currentProvider) {\r\n        \r\n        await currentProvider.request({method: 'eth_requestAccounts'});\r\n        const web3 = new Web3(currentProvider);\r\n        const userAccount = await web3.eth.getAccounts();\r\n        const account = userAccount[0];\r\n        let ethBalance = await web3.eth.getBalance(account);\r\n        console.log(account);\r\n        // setDoneScreenSpinner();\r\n        setEthBalance(ethBalance);\r\n        setEthAcc(account)\r\n        setIsConnected(true);\r\n      \r\n\t\t\t\tconst Address = \"0x59a195a6524b231Ce41F3Cbc8263d57F426E90E0\";\r\n\t\t\t\tsetEthAdd(Address)\r\n\t\t\t\twindow.web3 = await new Web3(window.ethereum);\r\n\t\t\t\twindow.contract = await new window.web3.eth.Contract(ABI, Address);\r\n\t\t\t\tsetWalletIsConnected(true);\r\n\r\n\r\n\t\t\t\t// counter\r\n\t\t\t\r\n      }\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n\treturn(\r\n\t\t<Panel>\r\n\t\t\t<PanelHeader left={<Icon28LogoVk/>}> Verify\r\n\t\t\t\t\t\t\r\n\t\t\t</PanelHeader>\r\n\t\t\r\n\t\t</Panel>\r\n\t)\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}