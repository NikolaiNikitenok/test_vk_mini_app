{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\k8909\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\GitHub\\\\test_vk_mini_app\\\\verify\\\\src\\\\panels\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport PropTypes, { string } from 'prop-types';\nimport { Panel, PanelHeader, PanelHeaderBack, Header, Button, Group, Cell, Div, Avatar, Tabs, TabsItem, List, Footer, PopoutWrapper, Textarea, Checkbox, Link, Radio, FormLayout, FormItem, Input } from '@vkontakte/vkui';\nimport { Icon28SettingsOutline, Icon28LogoVk } from '@vkontakte/icons';\nimport Web3 from 'web3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [contract, setContract] = useState('');\n  const [adress, setAdress] = useState('');\n  const [ethBalance, setEthBalance] = useState('');\n  const [ethAcc, setEthAcc] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [ethAdd, setEthAdd] = useState(false);\n  const [walletIsConnected, setWalletIsConnected] = useState(false);\n\n  const detectCurrentProvider = () => {\n    let provider;\n\n    if (window.ethereum) {\n      provider = window.ethereum;\n    } else if (window.web3) {\n      provider = window.web3.currentProvider;\n    } else {\n      console.log(\"Non-ethereum browser detected. You should install Metamask\");\n    }\n\n    return provider;\n  };\n\n  const onConnect = async () => {\n    try {\n      const currentProvider = detectCurrentProvider();\n      const ABI = [{\n        \"inputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"_tiketStor\",\n          \"type\": \"address\"\n        }],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"constructor\"\n      }, {\n        \"inputs\": [],\n        \"name\": \"tiketStor\",\n        \"outputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      }, {\n        \"inputs\": [{\n          \"internalType\": \"address\",\n          \"name\": \"_collection\",\n          \"type\": \"address\"\n        }, {\n          \"internalType\": \"address\",\n          \"name\": \"_user\",\n          \"type\": \"address\"\n        }],\n        \"name\": \"verifier\",\n        \"outputs\": [{\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      }];\n\n      if (currentProvider) {\n        await currentProvider.request({\n          method: 'eth_requestAccounts'\n        });\n        const web3 = new Web3(currentProvider);\n        const userAccount = await web3.eth.getAccounts();\n        const account = userAccount[0];\n        let ethBalance = await web3.eth.getBalance(account);\n        console.log(account); // setDoneScreenSpinner();\n\n        setEthBalance(ethBalance);\n        setEthAcc(account);\n        setIsConnected(true);\n        const Address = \"0x59a195a6524b231Ce41F3Cbc8263d57F426E90E0\";\n        setEthAdd(Address);\n        window.web3 = await new Web3(window.ethereum);\n        window.contract = await new window.web3.eth.Contract(ABI, Address);\n        setWalletIsConnected(true); // counter\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    children: [/*#__PURE__*/_jsxDEV(PanelHeader, {\n      left: /*#__PURE__*/_jsxDEV(Icon28LogoVk, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 23\n      }, this),\n      children: \" Verify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Group, {\n      className: \"app-wrapper\",\n      header: /*#__PURE__*/_jsxDEV(Header, {\n        mode: \"secondary\",\n        children: \"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u0435 MetaMask\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 43\n      }, this),\n      children: [!isConnected && /*#__PURE__*/_jsxDEV(Div, {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"app-button__login\",\n          stretched: true,\n          size: \"l\",\n          mode: \"secondary\",\n          onClick: onConnect,\n          children: \"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C MetaMask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }, this), isConnected && /*#__PURE__*/_jsxDEV(Div, {\n        className: \"app-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \" \\u0412\\u044B \\u043F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0438\\u043B\\u0438\\u0441\\u044C \\u043A MetaMask.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Group, {\n            header: /*#__PURE__*/_jsxDEV(Header, {\n              mode: \"secondary\",\n              children: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 23\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Div, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"app-balance\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441 \\u041A\\u043E\\u0448\\u0435\\u043B\\u044C\\u043A\\u0430: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 11\n                }, this), ethBalance / 10 ** 18]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u041A\\u043E\\u0448\\u0435\\u043B\\u044C\\u043A\\u0430: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 11\n                }, this), ethAcc]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 10\n              }, this), walletIsConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u041A\\u043E\\u043D\\u0442\\u0440\\u0430\\u043A\\u0442\\u0430: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 12\n                }, this), ethAdd]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(FormLayout, {\n            children: [/*#__PURE__*/_jsxDEV(FormItem, {\n              top: \"\\u041A\\u043E\\u043D\\u0442\\u0440\\u0430\\u043A\\u0442\",\n              status: name ? 'valid' : 'error',\n              bottom: name ? '' : 'Обязательное поле!',\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"name\",\n                name: \"name\",\n                value: name,\n                onChange: event => setName(event.target.value),\n                maxLength: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(FormItem, {\n              top: \"\\u0410\\u0434\\u0440\\u0435\\u0441\",\n              status: adress ? 'valid' : 'error',\n              bottom: adre ? '' : 'Обязательное поле!',\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"name\",\n                name: \"name\",\n                value: name,\n                onChange: event => setName(event.target.value),\n                maxLength: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Home, \"6lC5WetQWlnSAGgFiSrgl57mlUI=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/k8909/OneDrive/Документы/GitHub/test_vk_mini_app/verify/src/panels/Home.js"],"names":["React","useState","useEffect","PropTypes","string","Panel","PanelHeader","PanelHeaderBack","Header","Button","Group","Cell","Div","Avatar","Tabs","TabsItem","List","Footer","PopoutWrapper","Textarea","Checkbox","Link","Radio","FormLayout","FormItem","Input","Icon28SettingsOutline","Icon28LogoVk","Web3","Home","contract","setContract","adress","setAdress","ethBalance","setEthBalance","ethAcc","setEthAcc","isConnected","setIsConnected","ethAdd","setEthAdd","walletIsConnected","setWalletIsConnected","detectCurrentProvider","provider","window","ethereum","web3","currentProvider","console","log","onConnect","ABI","request","method","userAccount","eth","getAccounts","account","getBalance","Address","Contract","err","name","event","setName","target","value","adre"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState, useEffect} from 'react';\r\nimport PropTypes, { string } from 'prop-types';\r\n\r\nimport { \r\n\tPanel, \r\n\tPanelHeader, \r\n\tPanelHeaderBack, \r\n\tHeader, \r\n\tButton, \r\n\tGroup, \r\n\tCell, \r\n\tDiv, \r\n\tAvatar, \r\n\tTabs, \r\n\tTabsItem, \r\n\tList, \r\n\tFooter, \r\n\tPopoutWrapper,\r\n\tTextarea,\r\n\tCheckbox,\r\n\tLink,\r\n\tRadio,\r\n\tFormLayout, \r\n\tFormItem, \r\n\tInput, \r\n} from '@vkontakte/vkui';\r\nimport {Icon28SettingsOutline, Icon28LogoVk} from '@vkontakte/icons';\r\nimport Web3 from 'web3';\r\n\r\nconst Home = () => {\r\n\r\n\tconst[contract, setContract] = useState('')\r\n\tconst[adress, setAdress] = useState('')\r\n\tconst[ethBalance, setEthBalance] = useState('')\r\n\tconst[ethAcc, setEthAcc] = useState('')\r\n\tconst[isConnected, setIsConnected] = useState(false)\r\n\tconst[ethAdd, setEthAdd] = useState(false)\r\n\tconst[walletIsConnected, setWalletIsConnected] = useState(false)\r\n\r\n\tconst detectCurrentProvider = () => {\r\n    let provider;\r\n    if (window.ethereum) {\r\n      provider = window.ethereum;\r\n    } else if (window.web3) {\r\n      provider = window.web3.currentProvider;\r\n    } else {\r\n      console.log(\"Non-ethereum browser detected. You should install Metamask\");\r\n    }\r\n    return provider;\r\n  };\r\n\r\n\tconst onConnect = async () => {\r\n\t\ttry {\r\n\t\t\tconst currentProvider = detectCurrentProvider();\r\n\t\t\tconst ABI = [{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_tiketStor\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"tiketStor\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_collection\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"verifier\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]\r\n\r\n\t\t\tif(currentProvider) {\r\n        \r\n        await currentProvider.request({method: 'eth_requestAccounts'});\r\n        const web3 = new Web3(currentProvider);\r\n        const userAccount = await web3.eth.getAccounts();\r\n        const account = userAccount[0];\r\n        let ethBalance = await web3.eth.getBalance(account);\r\n        console.log(account);\r\n        // setDoneScreenSpinner();\r\n        setEthBalance(ethBalance);\r\n        setEthAcc(account)\r\n        setIsConnected(true);\r\n      \r\n\t\t\t\tconst Address = \"0x59a195a6524b231Ce41F3Cbc8263d57F426E90E0\";\r\n\t\t\t\tsetEthAdd(Address)\r\n\t\t\t\twindow.web3 = await new Web3(window.ethereum);\r\n\t\t\t\twindow.contract = await new window.web3.eth.Contract(ABI, Address);\r\n\t\t\t\tsetWalletIsConnected(true);\r\n\r\n\r\n\t\t\t\t// counter\r\n\t\t\t\r\n      }\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n\treturn(\r\n\t\t<Panel>\r\n\t\t\t<PanelHeader left={<Icon28LogoVk/>}> Verify\r\n\t\t\t\t\t\t\r\n\t\t\t</PanelHeader>\r\n\t\t\t<Group className=\"app-wrapper\" header={<Header mode=\"secondary\">Подключение MetaMask</Header>}>\r\n\t\t\t\t{!isConnected && (\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<Button className=\"app-button__login\" stretched size=\"l\" mode=\"secondary\" onClick={onConnect}>\r\n\t\t\t\t\t\tПодключить MetaMask\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t)}\r\n\t\t\t\r\n\t\t\t\t{isConnected && (\r\n\t\t\t\t\t<Div className=\"app-wrapper\">\r\n\t\t\t\t\t\t<div className=\"app-details\">\r\n\t\t\t\t\t\t\t<h2> Вы подключились к MetaMask.</h2>\r\n\t\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Информация</Header>}>\r\n\t\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"app-balance\">\r\n\t\t\t\t\t\t\t\t\t\t<span>Баланс Кошелька: </span>\r\n\t\t\t\t\t\t\t\t\t\t{ethBalance / (10**18)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<span>Адрес Кошелька: </span>\r\n\t\t\t\t\t\t\t\t\t\t{ethAcc}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t{walletIsConnected && (\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>Адрес Контракта: </span>\r\n\t\t\t\t\t\t\t\t\t\t\t{ethAdd}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\r\n\t\t\t\t\t\t\t\t{/* Название */}\r\n\t\t\t\t\t\t\t\t<FormItem\r\n\t\t\t\t\t\t\t\ttop=\"Контракт\"\r\n\t\t\t\t\t\t\t\tstatus={name ? 'valid' : 'error'}\r\n\t\t\t\t\t\t\t\tbottom={\r\n\t\t\t\t\t\t\t\t\tname ? '' : 'Обязательное поле!'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input type=\"name\" name=\"name\" value={name} onChange={(event) => setName(event.target.value)} maxLength={20}/>\r\n\t\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t\t<FormItem\r\n\t\t\t\t\t\t\t\ttop=\"Адрес\"\r\n\t\t\t\t\t\t\t\tstatus={adress ? 'valid' : 'error'}\r\n\t\t\t\t\t\t\t\tbottom={\r\n\t\t\t\t\t\t\t\t\tadre ? '' : 'Обязательное поле!'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input type=\"name\" name=\"name\" value={name} onChange={(event) => setName(event.target.value)} maxLength={20}/>\r\n\t\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t)}\r\n\t\t\t</Group>\r\n\t\t</Panel>\r\n\t)\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}