{"ast":null,"code":"import * as React from \"react\";\nimport { noop } from \"../../lib/utils\";\nimport { clamp } from \"../../helpers/math\";\nexport var ScrollContext = /*#__PURE__*/React.createContext({\n  getScroll: function getScroll() {\n    return {\n      x: 0,\n      y: 0\n    };\n  },\n  scrollTo: noop\n});\nexport var globalScrollController = function globalScrollController(window, document) {\n  return {\n    getScroll: function getScroll() {\n      return {\n        x: window.pageXOffset,\n        y: window.pageYOffset\n      };\n    },\n    scrollTo: function scrollTo() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Some iOS versions do not normalize scroll — do it manually.\n\n      window.scrollTo(x ? clamp(x, 0, document.body.scrollWidth - window.innerWidth) : 0, y ? clamp(y, 0, document.body.scrollHeight - window.innerHeight) : 0);\n    }\n  };\n};\nexport var elementScrollController = function elementScrollController(elRef) {\n  return {\n    getScroll: function getScroll() {\n      var _elRef$current$scroll, _elRef$current, _elRef$current$scroll2, _elRef$current2;\n\n      return {\n        x: (_elRef$current$scroll = (_elRef$current = elRef.current) === null || _elRef$current === void 0 ? void 0 : _elRef$current.scrollLeft) !== null && _elRef$current$scroll !== void 0 ? _elRef$current$scroll : 0,\n        y: (_elRef$current$scroll2 = (_elRef$current2 = elRef.current) === null || _elRef$current2 === void 0 ? void 0 : _elRef$current2.scrollTop) !== null && _elRef$current$scroll2 !== void 0 ? _elRef$current$scroll2 : 0\n      };\n    },\n    scrollTo: function scrollTo() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var el = elRef.current; // Some iOS versions do not normalize scroll — do it manually.\n\n      el === null || el === void 0 ? void 0 : el.scrollTo(x ? clamp(x, 0, el.scrollWidth - el.clientWidth) : 0, y ? clamp(y, 0, el.scrollHeight - el.clientHeight) : 0);\n    }\n  };\n};","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT;AACA,SAASC,KAAT;AAOA,OAAO,IAAMC,aAAa,gBAAGH,KAAK,CAACI,aAANJ,CAA4C;AACvEK,WAAS,EAAE;AAAA,WAAO;AAAEC,OAAC,EAAE,CAAL;AAAQC,OAAC,EAAE;AAAX,KAAP;AAD4D;AAEvEC,UAAQ,EAAEP;AAF6D,CAA5CD,CAAtB;AAKP,OAAO,IAAMS,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpCC,MADoC,EAEpCC,QAFoC;AAAA,SAGhC;AACJN,aAAS,EAAE;AAAA,aAAO;AAAEC,SAAC,EAAEI,MAAM,CAAEE,WAAb;AAA0BL,SAAC,EAAEG,MAAM,CAAEG;AAArC,OAAP;AADP;AAEJL,YAAQ,EAAE,oBAAkB;AAAA,UAAjBF,CAAiB,uEAAb,CAAa;AAAA,UAAVC,CAAU,uEAAN,CAAM,EAC1B;;AACAG,YAAM,CAAEF,QAARE,CACEJ,CAAC,GAAGJ,KAAK,CAACI,CAAD,EAAI,CAAJ,EAAOK,QAAQ,CAAEG,IAAVH,CAAeI,WAAfJ,GAA6BD,MAAM,CAAEM,UAA5C,CAAR,GAAkE,CADrEN,EAEEH,CAAC,GAAGL,KAAK,CAACK,CAAD,EAAI,CAAJ,EAAOI,QAAQ,CAAEG,IAAVH,CAAeM,YAAfN,GAA8BD,MAAM,CAAEQ,WAA7C,CAAR,GAAoE,CAFvER;AAID;AARG,GAHgC;AAA/B;AAcP,OAAO,IAAMS,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCC,KADqC;AAAA,SAEjC;AACJf,aAAS,EAAE;AAAA;;AAAA,aAAO;AAChBC,SAAC,6CAAEc,KAAK,CAACC,OAAR,mDAAEC,eAAeC,UAAjB,yEAA+B,CADhB;AAEhBhB,SAAC,+CAAEa,KAAK,CAACC,OAAR,oDAAEG,gBAAeC,SAAjB,2EAA8B;AAFf,OAAP;AADP;AAKJjB,YAAQ,EAAE,oBAAkB;AAAA,UAAjBF,CAAiB,uEAAb,CAAa;AAAA,UAAVC,CAAU,uEAAN,CAAM;AAC1B,UAAMmB,EAAE,GAAGN,KAAK,CAACC,OAAjB,CAD0B,CAE1B;;AACAK,QAAE,SAAFA,MAAE,WAAFA,cAAE,CAAElB,QAAJkB,CACEpB,CAAC,GAAGJ,KAAK,CAACI,CAAD,EAAI,CAAJ,EAAOoB,EAAE,CAACX,WAAHW,GAAiBA,EAAE,CAACC,WAA3B,CAAR,GAAkD,CADrDD,EAEEnB,CAAC,GAAGL,KAAK,CAACK,CAAD,EAAI,CAAJ,EAAOmB,EAAE,CAACT,YAAHS,GAAkBA,EAAE,CAACE,YAA5B,CAAR,GAAoD,CAFvDF;AAID;AAZG,GAFiC;AAAhC","names":["React","noop","clamp","ScrollContext","createContext","getScroll","x","y","scrollTo","globalScrollController","window","document","pageXOffset","pageYOffset","body","scrollWidth","innerWidth","scrollHeight","innerHeight","elementScrollController","elRef","current","_elRef$current","scrollLeft","_elRef$current2","scrollTop","el","clientWidth","clientHeight"],"sources":["../../../src/components/AppRoot/ScrollContext.ts"],"sourcesContent":["import * as React from \"react\";\nimport { noop } from \"../../lib/utils\";\nimport { clamp } from \"../../helpers/math\";\n\nexport interface ScrollContextInterface {\n  getScroll(): { x: number; y: number };\n  scrollTo(x?: number, y?: number): void;\n}\n\nexport const ScrollContext = React.createContext<ScrollContextInterface>({\n  getScroll: () => ({ x: 0, y: 0 }),\n  scrollTo: noop,\n});\n\nexport const globalScrollController = (\n  window: Window | undefined,\n  document: HTMLDocument | undefined\n) => ({\n  getScroll: () => ({ x: window!.pageXOffset, y: window!.pageYOffset }),\n  scrollTo: (x = 0, y = 0) => {\n    // Some iOS versions do not normalize scroll — do it manually.\n    window!.scrollTo(\n      x ? clamp(x, 0, document!.body.scrollWidth - window!.innerWidth) : 0,\n      y ? clamp(y, 0, document!.body.scrollHeight - window!.innerHeight) : 0\n    );\n  },\n});\n\nexport const elementScrollController = (\n  elRef: React.RefObject<HTMLElement>\n) => ({\n  getScroll: () => ({\n    x: elRef.current?.scrollLeft ?? 0,\n    y: elRef.current?.scrollTop ?? 0,\n  }),\n  scrollTo: (x = 0, y = 0) => {\n    const el = elRef.current;\n    // Some iOS versions do not normalize scroll — do it manually.\n    el?.scrollTo(\n      x ? clamp(x, 0, el.scrollWidth - el.clientWidth) : 0,\n      y ? clamp(y, 0, el.scrollHeight - el.clientHeight) : 0\n    );\n  },\n});\n"]},"metadata":{},"sourceType":"module"}