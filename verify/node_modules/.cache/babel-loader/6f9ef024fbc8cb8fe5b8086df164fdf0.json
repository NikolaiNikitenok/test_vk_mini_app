{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction parse(query) {\n  if (typeof query !== 'string') {\n    return {};\n  }\n\n  query = query.trim().replace(/^[?#&]/, '');\n\n  if (!query) {\n    return {};\n  }\n\n  var matches = /\\?(.+)$/ig.exec(query);\n  var str = matches ? matches[1] : query;\n  return str.split('&').reduce(function (acc, item) {\n    var param = item.split('=');\n\n    if (param[1]) {\n      acc[param[0]] = decodeURIComponent(param[1]);\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction stringify(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(data) !== 'object' || data === null) {\n    return '';\n  }\n\n  options = _objectSpread({\n    encode: true\n  }, options);\n\n  var encode = function encode(value) {\n    return options.encode ? encodeURIComponent(value) : String(value);\n  };\n\n  return Object.keys(data).reduce(function (acc, key) {\n    var value = data[key];\n\n    if (value === undefined) {\n      return acc;\n    }\n\n    if (value === null) {\n      if (!options.skipNull) {\n        acc.push([encode(key), ''].join('='));\n      }\n\n      return acc;\n    }\n\n    if (Array.isArray(value)) {\n      value.map(function (arrayItem) {\n        acc.push(\"\".concat(encode(key), \"[]=\").concat(encode(arrayItem)));\n      }).join();\n      return acc;\n    }\n\n    acc.push([encode(key), encode(value)].join('='));\n    return acc;\n  }, []).join('&');\n}\n\nexport var querystring = {\n  parse: parse,\n  stringify: stringify\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,SAASA,KAAT,CAAeC,KAAf,EAAiD;AAC/C,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,WAAO,EAAP;AACD;;AAEDA,OAAK,GAAGA,KAAK,CAACC,IAAND,GAAaE,OAAbF,CAAqB,QAArBA,EAA+B,EAA/BA,CAARA;;AACA,MAAI,CAACA,KAAL,EAAY;AACV,WAAO,EAAP;AACD;;AAED,MAAMG,OAAO,GAAG,YAAYC,IAAZ,CAAiBJ,KAAjB,CAAhB;AACA,MAAMK,GAAG,GAAGF,OAAO,GAAGA,OAAO,CAAC,CAAD,CAAV,GAAgBH,KAAnC;AAEA,SAAOK,GAAG,CACPC,KADID,CACE,GADFA,EAEJE,MAFIF,CAEG,UAACG,GAAD,EAAmBC,IAAnB,EAAoC;AAC1C,QAAMC,KAAK,GAAGD,IAAI,CAACH,KAALG,CAAW,GAAXA,CAAd;;AAEA,QAAIC,KAAK,CAAC,CAAD,CAAT,EAAc;AACZF,SAAG,CAACE,KAAK,CAAC,CAAD,CAAN,CAAHF,GAAgBG,kBAAkB,CAACD,KAAK,CAAC,CAAD,CAAN,CAAlCF;AACD;;AAED,WAAOA,GAAP;AATG,KAUF,EAVEH,CAAP;AAWD;;AAuBD,SAASO,SAAT,CAAmBC,IAAnB,EAAiF;AAAA,MAAxCC,OAAwC,uEAAZ,EAAY;;AAC/E,MAAIC,QAAOF,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;AAC7C,WAAO,EAAP;AACD;;AAEDC,SAAO;AACLE,UAAM,EAAE;AADH,KAEFF,OAFE,CAAPA;;AAKA,MAAME,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAwB;AACrC,WAAOH,OAAO,CAACE,MAARF,GAAiBI,kBAAkB,CAACD,KAAD,CAAnCH,GAA6CK,MAAM,CAACF,KAAD,CAA1D;AADF;;AAIA,SAAOG,MAAM,CAACC,IAAPD,CAAYP,IAAZO,EAAkBb,MAAlBa,CAAmC,UAACZ,GAAD,EAAMc,GAAN,EAAc;AACtD,QAAML,KAAK,GAAGJ,IAAI,CAACS,GAAD,CAAlB;;AAEA,QAAIL,KAAK,KAAKM,SAAd,EAAyB;AACvB,aAAOf,GAAP;AACD;;AAED,QAAIS,KAAK,KAAK,IAAd,EAAoB;AAClB,UAAI,CAACH,OAAO,CAACU,QAAb,EAAuB;AACrBhB,WAAG,CAACiB,IAAJjB,CAAS,CAACQ,MAAM,CAACM,GAAD,CAAP,EAAc,EAAd,EAAkBI,IAAlB,CAAuB,GAAvB,CAATlB;AACD;;AAED,aAAOA,GAAP;AACD;;AAED,QAAImB,KAAK,CAACC,OAAND,CAAcV,KAAdU,CAAJ,EAA0B;AACxBV,WAAK,CAACY,GAANZ,CAAU,UAACa,SAAD,EAAe;AACvBtB,WAAG,CAACiB,IAAJjB,WAAYQ,MAAM,CAACM,GAAD,CAAlB,gBAA6BN,MAAM,CAACc,SAAD,CAAnC;AADF,SAEGJ,IAFHT;AAGA,aAAOT,GAAP;AACD;;AAEDA,OAAG,CAACiB,IAAJjB,CAAS,CAACQ,MAAM,CAACM,GAAD,CAAP,EAAcN,MAAM,CAACC,KAAD,CAApB,EAA6BS,IAA7B,CAAkC,GAAlC,CAATlB;AACA,WAAOA,GAAP;AAvBK,KAwBJ,EAxBIY,EAwBAM,IAxBAN,CAwBK,GAxBLA,CAAP;AAyBD;;AAED,OAAO,IAAMW,WAAW,GAAG;AACzBhC,OAAK,EAALA,KADyB;AAEzBa,WAAS,EAATA;AAFyB,CAApB","names":["parse","query","trim","replace","matches","exec","str","split","reduce","acc","item","param","decodeURIComponent","stringify","data","options","_typeof","encode","value","encodeURIComponent","String","Object","keys","key","undefined","skipNull","push","join","Array","isArray","map","arrayItem","querystring"],"sources":["../../src/querystring.ts"],"sourcesContent":["export interface ParsedQuery<T = string> {\n  [key: string]: T | T[] | null;\n}\n\nfunction parse(query: string | any): ParsedQuery {\n  if (typeof query !== 'string') {\n    return {};\n  }\n\n  query = query.trim().replace(/^[?#&]/, '');\n  if (!query) {\n    return {};\n  }\n\n  const matches = /\\?(.+)$/ig.exec(query);\n  const str = matches ? matches[1] : query;\n\n  return str\n    .split('&')\n    .reduce((acc: ParsedQuery, item: string) => {\n      const param = item.split('=');\n\n      if (param[1]) {\n        acc[param[0]] = decodeURIComponent(param[1]);\n      }\n\n      return acc;\n    }, {});\n}\n\ntype StringifyQueryItem = string | boolean | number | null | undefined;\n\ntype StringifyQuery = Record<string, StringifyQueryItem | readonly StringifyQueryItem[]>;\n\ninterface StringifyOptions {\n  /**\n   * URL encode the keys and values\n   *\n   * @default true\n   */\n  encode?: boolean;\n\n  /**\n   * Skip keys with `null` as the value.\n   * Keys with `undefined` as the value are always ignored.\n   *\n   * @default true\n   */\n  skipNull?: true;\n}\n\nfunction stringify(data: StringifyQuery, options: StringifyOptions = {}): string {\n  if (typeof data !== 'object' || data === null) {\n    return '';\n  }\n\n  options = {\n    encode: true,\n    ...options,\n  };\n\n  const encode = (value: any): string => {\n    return options.encode ? encodeURIComponent(value) : String(value);\n  };\n\n  return Object.keys(data).reduce<string[]>((acc, key) => {\n    const value = data[key];\n\n    if (value === undefined) {\n      return acc;\n    }\n\n    if (value === null) {\n      if (!options.skipNull) {\n        acc.push([encode(key), ''].join('='));\n      }\n\n      return acc;\n    }\n\n    if (Array.isArray(value)) {\n      value.map((arrayItem) => {\n        acc.push(`${encode(key)}[]=${encode(arrayItem)}`);\n      }).join();\n      return acc;\n    }\n\n    acc.push([encode(key), encode(value)].join('='));\n    return acc;\n  }, []).join('&');\n}\n\nexport const querystring = {\n  parse,\n  stringify,\n};\n"]},"metadata":{},"sourceType":"module"}