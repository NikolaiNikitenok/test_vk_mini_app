{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"style\", \"defaultValue\", \"align\", \"placeholder\", \"children\", \"className\", \"getRef\", \"getRootRef\", \"disabled\", \"sizeX\", \"sizeY\", \"multiline\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField } from \"../FormField/FormField\";\nimport { withAdaptivity, SizeType } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Text from \"../Typography/Text/Text\";\nimport { VKCOM } from \"../../lib/platform\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\n\nvar NativeSelect = function NativeSelect(_ref) {\n  var _classNames;\n\n  var style = _ref.style,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? \"\" : _ref$defaultValue,\n      align = _ref.align,\n      placeholder = _ref.placeholder,\n      children = _ref.children,\n      className = _ref.className,\n      getRef = _ref.getRef,\n      getRootRef = _ref.getRootRef,\n      disabled = _ref.disabled,\n      sizeX = _ref.sizeX,\n      sizeY = _ref.sizeY,\n      multiline = _ref.multiline,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      title = _React$useState2[0],\n      setTitle = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      notSelected = _React$useState4[0],\n      setNotSelected = _React$useState4[1];\n\n  var _useEnsuredControl = useEnsuredControl(restProps, {\n    defaultValue: defaultValue\n  }),\n      _useEnsuredControl2 = _slicedToArray(_useEnsuredControl, 2),\n      value = _useEnsuredControl2[0],\n      onChange = _useEnsuredControl2[1];\n\n  var selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(function () {\n    var _selectRef$current;\n\n    var selectedOption = (_selectRef$current = selectRef.current) === null || _selectRef$current === void 0 ? void 0 : _selectRef$current.options[selectRef.current.selectedIndex];\n\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setNotSelected(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n  var TypographyComponent = platform === VKCOM || sizeY === SizeType.COMPACT ? Text : Headline;\n  return createScopedElement(FormField, {\n    Component: \"label\",\n    vkuiClass: classNames(getClassName(\"Select\", platform), (_classNames = {}, _defineProperty(_classNames, \"Select--not-selected\", notSelected), _defineProperty(_classNames, \"Select--align-\".concat(align), !!align), _defineProperty(_classNames, \"Select--sizeX--\".concat(sizeX), !!sizeX), _defineProperty(_classNames, \"Select--sizeY--\".concat(sizeY), !!sizeY), _defineProperty(_classNames, \"Select--multiline\", multiline), _classNames)),\n    className: className,\n    style: style,\n    getRootRef: getRootRef,\n    disabled: disabled,\n    after: createScopedElement(DropdownIcon, null)\n  }, createScopedElement(\"select\", _extends({}, restProps, {\n    disabled: disabled,\n    vkuiClass: \"Select__el\",\n    onChange: onChange,\n    value: value,\n    ref: selectRef\n  }), placeholder && createScopedElement(\"option\", {\n    value: \"\"\n  }, placeholder), children), createScopedElement(TypographyComponent, {\n    Component: \"div\",\n    weight: \"regular\",\n    vkuiClass: \"Select__container\"\n  }, createScopedElement(\"span\", {\n    vkuiClass: \"Select__title\"\n  }, title)));\n}; // eslint-disable-next-line import/no-default-export\n\n\nexport default withAdaptivity(NativeSelect, {\n  sizeX: true,\n  sizeY: true\n});","map":{"version":3,"mappings":"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","names":["React","classNames","DropdownIcon","FormField","withAdaptivity","SizeType","getClassName","Headline","Text","VKCOM","useIsomorphicLayoutEffect","useEnsuredControl","useExternRef","usePlatform","NativeSelect","style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline","restProps","platform","useState","title","setTitle","notSelected","setNotSelected","value","onChange","selectRef","selectedOption","current","_selectRef$current","options","selectedIndex","text","TypographyComponent","COMPACT","createScopedElement","Component","vkuiClass","after","ref","weight"],"sources":["../../../src/components/NativeSelect/NativeSelect.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, SizeType } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Text from \"../Typography/Text/Text\";\nimport { VKCOM } from \"../../lib/platform\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"../Select/Select.css\";\n\nexport interface NativeSelectProps\n  extends React.SelectHTMLAttributes<HTMLSelectElement>,\n    HasRef<HTMLSelectElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasAlign,\n    AdaptivityProps {\n  placeholder?: string;\n  multiline?: boolean;\n}\n\nexport interface SelectState {\n  value?: React.SelectHTMLAttributes<HTMLSelectElement>[\"value\"];\n  title?: string;\n  notSelected?: boolean;\n}\n\nconst NativeSelect: React.FC<\n  NativeSelectProps & AdaptivityContextInterface\n> = ({\n  style,\n  defaultValue = \"\",\n  align,\n  placeholder,\n  children,\n  className,\n  getRef,\n  getRootRef,\n  disabled,\n  sizeX,\n  sizeY,\n  multiline,\n  ...restProps\n}) => {\n  const platform = usePlatform();\n  const [title, setTitle] = React.useState(\"\");\n  const [notSelected, setNotSelected] = React.useState(false);\n  const [value, onChange] = useEnsuredControl(restProps, { defaultValue });\n  const selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption =\n      selectRef.current?.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setNotSelected(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n\n  const TypographyComponent =\n    platform === VKCOM || sizeY === SizeType.COMPACT ? Text : Headline;\n\n  return (\n    <FormField\n      Component=\"label\"\n      vkuiClass={classNames(getClassName(\"Select\", platform), {\n        [\"Select--not-selected\"]: notSelected,\n        [`Select--align-${align}`]: !!align,\n        [`Select--sizeX--${sizeX}`]: !!sizeX,\n        [`Select--sizeY--${sizeY}`]: !!sizeY,\n        \"Select--multiline\": multiline,\n      })}\n      className={className}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      after={<DropdownIcon />}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        vkuiClass=\"Select__el\"\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <TypographyComponent\n        Component=\"div\"\n        weight=\"regular\"\n        vkuiClass=\"Select__container\"\n      >\n        <span vkuiClass=\"Select__title\">{title}</span>\n      </TypographyComponent>\n    </FormField>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(NativeSelect, {\n  sizeX: true,\n  sizeY: true,\n});\n"]},"metadata":{},"sourceType":"module"}