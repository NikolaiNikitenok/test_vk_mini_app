{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"style\", \"vertical\", \"getRootRef\", \"getRef\", \"filled\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { SplitColContext } from \"../SplitCol/SplitCol\";\nimport { TooltipContainer } from \"../Tooltip/TooltipContainer\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\n\nvar FixedLayout = function FixedLayout(_ref) {\n  var children = _ref.children,\n      style = _ref.style,\n      vertical = _ref.vertical,\n      getRootRef = _ref.getRootRef,\n      getRef = _ref.getRef,\n      filled = _ref.filled,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(undefined),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      width = _React$useState2[0],\n      setWidth = _React$useState2[1];\n\n  var _useDOM = useDOM(),\n      window = _useDOM.window;\n\n  var _React$useContext = React.useContext(SplitColContext),\n      colRef = _React$useContext.colRef;\n\n  var doResize = function doResize() {\n    return setWidth(colRef !== null && colRef !== void 0 && colRef.current ? \"\".concat(colRef.current.offsetWidth, \"px\") : undefined);\n  };\n\n  React.useEffect(doResize, [colRef]);\n  useGlobalEventListener(window, \"resize\", doResize);\n  return createScopedElement(TooltipContainer, _extends({}, restProps, {\n    fixed: true,\n    ref: getRootRef,\n    vkuiClass: classNames(getClassName(\"FixedLayout\", platform), {\n      \"FixedLayout--filled\": filled\n    }, \"FixedLayout--\".concat(vertical)),\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      width: width\n    })\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"FixedLayout__in\",\n    ref: getRef\n  }, children));\n}; // eslint-disable-next-line import/no-default-export\n\n\nexport default FixedLayout;","map":{"version":3,"mappings":";;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AAEA,SAASC,eAAT;AACA,SAASC,gBAAT;AACA,SAASC,MAAT;AACA,SAASC,sBAAT;AACA,SAASC,WAAT;;AAsBA,IAAMC,WAAuC,GAAG,SAA1CA,WAA0C,OAQxB;AAAA,MAPtBC,QAOsB,QAPtBA,QAOsB;AAAA,MANtBC,KAMsB,QANtBA,KAMsB;AAAA,MALtBC,QAKsB,QALtBA,QAKsB;AAAA,MAJtBC,UAIsB,QAJtBA,UAIsB;AAAA,MAHtBC,MAGsB,QAHtBA,MAGsB;AAAA,MAFtBC,MAEsB,QAFtBA,MAEsB;AAAA,MADnBC,SACmB;;AACtB,MAAMC,QAAQ,GAAGT,WAAW,EAA5B;;AACA,wBAA0BP,KAAK,CAACiB,QAANjB,CAAmCkB,SAAnClB,CAA1B;AAAA;AAAA,MAAOmB,KAAP;AAAA,MAAcC,QAAd;;AACA,gBAAmBf,MAAM,EAAzB;AAAA,MAAQgB,MAAR,WAAQA,MAAR;;AACA,0BAAmBrB,KAAK,CAACsB,UAANtB,CAAiBG,eAAjBH,CAAnB;AAAA,MAAQuB,MAAR,qBAAQA,MAAR;;AACA,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,WACfJ,QAAQ,CAACG,MAAM,SAANA,UAAM,WAANA,UAAM,CAAEE,OAARF,aAAqBA,MAAM,CAACE,OAAPF,CAAeG,WAApC,UAAsDR,SAAvD,CADO;AAAjB;;AAEAlB,OAAK,CAAC2B,SAAN3B,CAAgBwB,QAAhBxB,EAA0B,CAACuB,MAAD,CAA1BvB;AACAM,wBAAsB,CAACe,MAAD,EAAS,QAAT,EAAmBG,QAAnB,CAAtBlB;AAEA,SACEsB,oBAACxB,gBAAD,eACMW,SADN;AAEEc,SAAK,MAFP;AAGEC,OAAG,EAAElB,UAHP;AAIEmB,aAAS,EAAE7B,UAAU,CACnBD,YAAY,CAAC,aAAD,EAAgBe,QAAhB,CADO,EAEnB;AACE,6BAAuBF;AADzB,KAFmB,yBAKHH,QALG,EAJvB;AAWED,SAAK,kCAAOA,KAAP;AAAcS,WAAK,EAALA;AAAd;AAXP,MAaES;AAAKG,aAAS,EAAC,iBAAf;AAAiCD,OAAG,EAAEjB;AAAtC,KACGJ,QADH,CAbF,CADF;AAlBF,E,CAuCA;;;AACA,eAAeD,WAAf","names":["React","getClassName","classNames","SplitColContext","TooltipContainer","useDOM","useGlobalEventListener","usePlatform","FixedLayout","children","style","vertical","getRootRef","getRef","filled","restProps","platform","useState","undefined","width","setWidth","window","useContext","colRef","doResize","current","offsetWidth","useEffect","createScopedElement","fixed","ref","vkuiClass"],"sources":["../../../src/components/FixedLayout/FixedLayout.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { HasRef, HasRootRef } from \"../../types\";\nimport { SplitColContext } from \"../SplitCol/SplitCol\";\nimport { TooltipContainer } from \"../Tooltip/TooltipContainer\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport \"./FixedLayout.css\";\n\nexport interface FixedLayoutProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRootRef<HTMLDivElement>,\n    HasRef<HTMLDivElement> {\n  vertical?: \"top\" | \"bottom\";\n  /**\n   * Это свойство определяет, будет ли фон компонента окрашен в цвет фона контента.\n   * Это часто необходимо для фиксированных кнопок в нижней части экрана.\n   */\n  filled?: boolean;\n}\n\nexport interface FixedLayoutState {\n  position: \"absolute\" | null;\n  top: number;\n  bottom: number;\n  width: string;\n}\n\nconst FixedLayout: React.FC<FixedLayoutProps> = ({\n  children,\n  style,\n  vertical,\n  getRootRef,\n  getRef,\n  filled,\n  ...restProps\n}: FixedLayoutProps) => {\n  const platform = usePlatform();\n  const [width, setWidth] = React.useState<string | undefined>(undefined);\n  const { window } = useDOM();\n  const { colRef } = React.useContext(SplitColContext);\n  const doResize = () =>\n    setWidth(colRef?.current ? `${colRef.current.offsetWidth}px` : undefined);\n  React.useEffect(doResize, [colRef]);\n  useGlobalEventListener(window, \"resize\", doResize);\n\n  return (\n    <TooltipContainer\n      {...restProps}\n      fixed\n      ref={getRootRef}\n      vkuiClass={classNames(\n        getClassName(\"FixedLayout\", platform),\n        {\n          \"FixedLayout--filled\": filled,\n        },\n        `FixedLayout--${vertical}`\n      )}\n      style={{ ...style, width }}\n    >\n      <div vkuiClass=\"FixedLayout__in\" ref={getRef}>\n        {children}\n      </div>\n    </TooltipContainer>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default FixedLayout;\n"]},"metadata":{},"sourceType":"module"}