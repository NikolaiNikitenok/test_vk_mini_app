(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(21),a=n.n(s),r=n(13),i=n.n(r),o=n(18),l=n(9),j=n(17),u=n.n(j),b=n(5),d=(n(144),n(150)),p=n(25),h=n.n(p),O=n(3),x=function(){var e="",t="",n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(""),j=Object(l.a)(i,2),p=j[0],x=j[1],w=Object(c.useState)(""),f=Object(l.a)(w,2),m=f[0],y=f[1],v=Object(c.useState)(""),g=Object(l.a)(v,2),k=g[0],S=g[1],M=Object(c.useState)(!1),A=Object(l.a)(M,2),T=A[0],_=A[1],C=Object(c.useState)(!1),N=Object(l.a)(C,2),V=N[0],E=N[1],F=Object(c.useState)(!1),K=Object(l.a)(F,2),W=K[0],I=K[1],q=Object(c.useState)([]),z=Object(l.a)(q,2),B=z[0],J=(z[1],function(){var e;return window.ethereum?e=window.ethereum:window.web3?e=window.web3.currentProvider:console.log("Non-ethereum browser detected. You should install Metamask"),e}),P=function(){var n=Object(o.a)(u.a.mark((function n(){var c,s,a,i,o,l,j,b,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=J(),s=[{inputs:[{internalType:"address",name:"_tiketStor",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"tiketStor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_collection",type:"address"},{internalType:"address",name:"_user",type:"address"}],name:"verifier",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],!c){n.next=37;break}return n.next=6,c.request({method:"eth_requestAccounts"});case 6:return a=new h.a(c),n.next=9,a.eth.getAccounts();case 9:return i=n.sent,o=i[0],n.next=13,a.eth.getBalance(o);case 13:return l=n.sent,console.log(o),console.log(window.location.hash),y(l),S(o),_(!0),E(j="0x59a195a6524b231Ce41F3Cbc8263d57F426E90E0"),n.next=23,new h.a(window.ethereum);case 23:return window.web3=n.sent,n.next=26,new window.web3.eth.Contract(s,j);case 26:window.contract=n.sent,I(!0),b=window.location.hash.substring(1),[],d=b.split("/"),e=d[1],r(e),t=d[0],x(t),console.log(e),console.log(t);case 37:n.next=42;break;case 39:n.prev=39,n.t0=n.catch(0),console.log(n.t0);case 42:case"end":return n.stop()}}),n,null,[[0,39]])})));return function(){return n.apply(this,arguments)}}(),U=function(){var n=Object(o.a)(u.a.mark((function n(){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return[],x(t),r(e),n.next=5,window.contract.methods.verifier(a,p).call({from:k});case 5:c=n.sent,console.log(c),c&&alert("\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u043d\u0430 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435!"),c||alert("\u0412\u044b \u041d\u0415 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u043d\u0430 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435!");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(O.jsxs)(b.i,{children:[Object(O.jsx)(b.j,{left:Object(O.jsx)(d.a,{}),children:" Verify"}),Object(O.jsxs)(b.g,{className:"app-wrapper",header:Object(O.jsx)(b.h,{mode:"secondary",children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 MetaMask"}),children:[!T&&Object(O.jsxs)(b.e,{children:[Object(O.jsx)("br",{}),Object(O.jsx)(b.c,{className:"app-button__login",stretched:!0,size:"l",mode:"secondary",onClick:P,children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c MetaMask"})]}),T&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(b.e,{className:"app-wrapper",children:[Object(O.jsxs)("div",{className:"app-details",children:[Object(O.jsx)("h2",{children:" \u0412\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438\u0441\u044c \u043a MetaMask."}),Object(O.jsx)(b.g,{header:Object(O.jsx)(b.h,{mode:"secondary",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(O.jsxs)(b.e,{children:[Object(O.jsxs)("div",{className:"app-balance",children:[Object(O.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441 \u041a\u043e\u0448\u0435\u043b\u044c\u043a\u0430: "}),m/Math.pow(10,18)]}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441 \u041a\u043e\u0448\u0435\u043b\u044c\u043a\u0430: "}),k]}),Object(O.jsx)("br",{}),W&&Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"\u0410\u0434\u0440\u0435\u0441 \u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430: "}),V]})]})}),Object(O.jsxs)(b.f,{children:[Object(O.jsx)(b.c,{size:"l",onClick:U,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435"}),B]})]}),Object(O.jsx)("br",{})]})})]})]})},w=function(){var e=Object(c.useState)("bright_light"),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)("home"),r=Object(l.a)(a,2),j=r[0],d=r[1],p=Object(c.useState)(null),h=Object(l.a)(p,2),w=(h[0],h[1]),f=Object(c.useState)(null),m=Object(l.a)(f,2),y=m[0],v=m[1];i.a.send("VKWebAppAddToFavorites").then((function(e){e.result})).catch((function(e){console.log(e)})),Object(c.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,w(t),v(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;"VKWebAppUpdateConfig"===n&&s(c.scheme)})),function(){e.apply(this,arguments)}()}),[]);return Object(O.jsx)(b.d,{scheme:n,children:Object(O.jsx)(b.a,{children:Object(O.jsx)(b.b,{children:Object(O.jsx)(b.m,{popout:y,children:Object(O.jsx)(b.l,{children:Object(O.jsx)(b.n,{activePanel:j,children:Object(O.jsx)(x,{id:"home",go:function(e){d(e.currentTarget.dataset.to)}})})})})})})})};i.a.send("VKWebAppInit").then((function(e){e.result})).catch((function(e){console.log(e)})),a.a.render(Object(O.jsx)(w,{}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.cc518f29.chunk.js.map