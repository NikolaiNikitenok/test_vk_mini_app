{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"popout\", \"modal\", \"children\", \"activeView\", \"onTransition\", \"nav\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { IOS } from \"../../lib/platform\";\nimport { ConfigProviderContext } from \"../ConfigProvider/ConfigProviderContext\";\nimport { SplitColContext } from \"../SplitCol/SplitCol\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { ScrollContext } from \"../AppRoot/ScrollContext\";\nimport { NavTransitionProvider } from \"../NavTransitionContext/NavTransitionContext\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nvar warn = warnOnce(\"Root\");\n\nvar Root = function Root(_ref) {\n  var _ref$popout = _ref.popout,\n      popout = _ref$popout === void 0 ? null : _ref$popout,\n      modal = _ref.modal,\n      children = _ref.children,\n      _activeView = _ref.activeView,\n      onTransition = _ref.onTransition,\n      nav = _ref.nav,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var scroll = React.useContext(ScrollContext);\n  var platform = usePlatform();\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document;\n\n  var scrolls = React.useRef({}).current;\n  var viewNodes = React.useRef({}).current;\n\n  var _React$useContext = React.useContext(ConfigProviderContext),\n      _React$useContext$tra = _React$useContext.transitionMotionEnabled,\n      transitionMotionEnabled = _React$useContext$tra === void 0 ? true : _React$useContext$tra;\n\n  var _React$useContext2 = React.useContext(SplitColContext),\n      animate = _React$useContext2.animate;\n\n  var disableAnimation = !transitionMotionEnabled || !animate;\n  var views = React.Children.toArray(children);\n\n  var _React$useState = React.useState({\n    activeView: _activeView,\n    transition: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      _React$useState2$ = _React$useState2[0],\n      prevView = _React$useState2$.prevView,\n      activeView = _React$useState2$.activeView,\n      transition = _React$useState2$.transition,\n      isBack = _React$useState2$.isBack,\n      _setState = _React$useState2[1];\n\n  var transitionTo = function transitionTo(panel) {\n    if (panel !== activeView) {\n      var viewIds = views.map(function (view) {\n        return getNavId(view.props, warn);\n      });\n\n      var _isBack = viewIds.indexOf(panel) < viewIds.indexOf(activeView);\n\n      scrolls[activeView] = scroll.getScroll().y;\n\n      _setState({\n        activeView: panel,\n        prevView: activeView,\n        transition: true,\n        isBack: _isBack\n      });\n    }\n  };\n\n  var finishTransition = React.useCallback(function () {\n    return _setState({\n      activeView: activeView,\n      prevView: prevView,\n      isBack: isBack,\n      transition: false\n    });\n  }, [activeView, isBack, prevView]);\n  useIsomorphicLayoutEffect(function () {\n    document.activeElement.blur();\n  }, [!!popout, activeView]); // Нужен переход\n\n  useIsomorphicLayoutEffect(function () {\n    return transitionTo(_activeView);\n  }, [_activeView]);\n  useIsomorphicLayoutEffect(function () {\n    if (!transition && prevView) {\n      // Закончился переход\n      scroll.scrollTo(0, isBack ? scrolls[activeView] : 0);\n      onTransition && onTransition({\n        isBack: Boolean(isBack),\n        from: prevView,\n        to: activeView\n      });\n    }\n  }, [transition]);\n  var fallbackTransition = useTimeout(finishTransition, platform === IOS ? 600 : 300);\n  React.useEffect(function () {\n    if (!transition) {\n      fallbackTransition.clear();\n      return;\n    }\n\n    disableAnimation ? finishTransition() : fallbackTransition.set();\n  }, [disableAnimation, fallbackTransition, finishTransition, transition]);\n\n  var onAnimationEnd = function onAnimationEnd(e) {\n    if ([\"vkui-root-android-animation-hide-back\", \"vkui-root-android-animation-show-forward\", \"vkui-root-ios-animation-hide-back\", \"vkui-root-ios-animation-show-forward\"].includes(e.animationName)) {\n      finishTransition();\n    }\n  };\n\n  if (process.env.NODE_ENV === \"development\") {\n    popout && warn(\"Свойство popout устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\");\n    modal && warn(\"Свойство modal устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\");\n  }\n\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName(\"Root\", platform), {\n      \"Root--transition\": !disableAnimation && transition,\n      \"Root--no-motion\": disableAnimation\n    })\n  }), views.map(function (view) {\n    var _scrolls$viewId;\n\n    var viewId = getNavId(view.props, warn);\n\n    if (viewId !== activeView && !(transition && viewId === prevView)) {\n      return null;\n    }\n\n    var isTransitionTarget = transition && viewId === (isBack ? prevView : activeView);\n    var compensateScroll = transition && (viewId === prevView || isBack && viewId === activeView);\n    return createScopedElement(\"div\", {\n      key: viewId,\n      ref: function ref(e) {\n        return viewId && (viewNodes[viewId] = e);\n      },\n      onAnimationEnd: isTransitionTarget ? onAnimationEnd : undefined,\n      vkuiClass: classNames(\"Root__view\", {\n        \"Root__view--hide-back\": transition && viewId === prevView && isBack,\n        \"Root__view--hide-forward\": transition && viewId === prevView && !isBack,\n        \"Root__view--show-back\": transition && viewId === activeView && isBack,\n        \"Root__view--show-forward\": transition && viewId === activeView && !isBack,\n        \"Root__view--active\": !transition && viewId === activeView\n      })\n    }, createScopedElement(NavTransitionProvider, {\n      entering: transition && viewId === activeView\n    }, createScopedElement(\"div\", {\n      vkuiClass: \"Root__scrollCompensation\",\n      style: {\n        marginTop: compensateScroll ? viewId && -((_scrolls$viewId = scrolls[viewId]) !== null && _scrolls$viewId !== void 0 ? _scrolls$viewId : 0) : undefined\n      }\n    }, view)));\n  }), createScopedElement(AppRootPortal, null, !!popout && createScopedElement(\"div\", {\n    vkuiClass: \"Root__popout\"\n  }, popout), !!modal && createScopedElement(\"div\", {\n    vkuiClass: \"Root__modal\"\n  }, modal)));\n}; // eslint-disable-next-line import/no-default-export\n\n\nexport default Root;","map":{"version":3,"mappings":"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","names":["React","classNames","getClassName","IOS","ConfigProviderContext","SplitColContext","AppRootPortal","ScrollContext","NavTransitionProvider","getNavId","warnOnce","useDOM","useIsomorphicLayoutEffect","useTimeout","usePlatform","warn","Root","popout","modal","children","_activeView","activeView","onTransition","nav","restProps","scroll","useContext","platform","document","scrolls","useRef","current","viewNodes","transitionMotionEnabled","animate","disableAnimation","views","Children","toArray","useState","transition","prevView","isBack","_setState","transitionTo","panel","viewIds","map","view","props","indexOf","getScroll","y","finishTransition","useCallback","activeElement","blur","scrollTo","Boolean","from","to","fallbackTransition","useEffect","clear","set","onAnimationEnd","e","includes","animationName","process","env","NODE_ENV","createScopedElement","vkuiClass","viewId","isTransitionTarget","compensateScroll","key","ref","undefined","entering","style","marginTop"],"sources":["../../../src/components/Root/Root.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { IOS } from \"../../lib/platform\";\nimport { ConfigProviderContext } from \"../ConfigProvider/ConfigProviderContext\";\nimport { SplitColContext } from \"../SplitCol/SplitCol\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { ScrollContext } from \"../AppRoot/ScrollContext\";\nimport { NavTransitionProvider } from \"../NavTransitionContext/NavTransitionContext\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport \"./Root.css\";\n\nexport interface RootProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    NavIdProps {\n  activeView: string;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `Alert`, `ActionSheet` и `ScreenSpinner`.\n   */\n  popout?: React.ReactNode;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `ModalRoot`.\n   */\n  modal?: React.ReactNode;\n}\n\nexport interface RootState {\n  activeView: string;\n  transition: boolean;\n  isBack?: boolean;\n  prevView?: string;\n}\n\nconst warn = warnOnce(\"Root\");\nconst Root: React.FC<RootProps> = ({\n  popout = null,\n  modal,\n  children,\n  activeView: _activeView,\n  onTransition,\n  nav,\n  ...restProps\n}: RootProps) => {\n  const scroll = React.useContext(ScrollContext);\n  const platform = usePlatform();\n  const { document } = useDOM();\n  const scrolls = React.useRef<Record<string, number>>({}).current;\n  const viewNodes = React.useRef<Record<string, HTMLElement | null>>(\n    {}\n  ).current;\n\n  const { transitionMotionEnabled = true } = React.useContext(\n    ConfigProviderContext\n  );\n  const { animate } = React.useContext(SplitColContext);\n  const disableAnimation = !transitionMotionEnabled || !animate;\n\n  const views = React.Children.toArray(children) as React.ReactElement[];\n\n  const [{ prevView, activeView, transition, isBack }, _setState] =\n    React.useState<RootState>({\n      activeView: _activeView,\n      transition: false,\n    });\n  const transitionTo = (panel: string) => {\n    if (panel !== activeView) {\n      const viewIds = views.map((view) => getNavId(view.props, warn));\n      const isBack = viewIds.indexOf(panel) < viewIds.indexOf(activeView);\n      scrolls[activeView] = scroll.getScroll().y;\n      _setState({\n        activeView: panel,\n        prevView: activeView,\n        transition: true,\n        isBack,\n      });\n    }\n  };\n  const finishTransition = React.useCallback(\n    () => _setState({ activeView, prevView, isBack, transition: false }),\n    [activeView, isBack, prevView]\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    (document!.activeElement as HTMLElement).blur();\n  }, [!!popout, activeView]);\n\n  // Нужен переход\n  useIsomorphicLayoutEffect(() => transitionTo(_activeView), [_activeView]);\n  useIsomorphicLayoutEffect(() => {\n    if (!transition && prevView) {\n      // Закончился переход\n      scroll.scrollTo(0, isBack ? scrolls[activeView] : 0);\n      onTransition &&\n        onTransition({\n          isBack: Boolean(isBack),\n          from: prevView,\n          to: activeView,\n        });\n    }\n  }, [transition]);\n\n  const fallbackTransition = useTimeout(\n    finishTransition,\n    platform === IOS ? 600 : 300\n  );\n  React.useEffect(() => {\n    if (!transition) {\n      fallbackTransition.clear();\n      return;\n    }\n    disableAnimation ? finishTransition() : fallbackTransition.set();\n  }, [disableAnimation, fallbackTransition, finishTransition, transition]);\n\n  const onAnimationEnd = (e: React.AnimationEvent) => {\n    if (\n      [\n        \"vkui-root-android-animation-hide-back\",\n        \"vkui-root-android-animation-show-forward\",\n        \"vkui-root-ios-animation-hide-back\",\n        \"vkui-root-ios-animation-show-forward\",\n      ].includes(e.animationName)\n    ) {\n      finishTransition();\n    }\n  };\n\n  if (process.env.NODE_ENV === \"development\") {\n    popout &&\n      warn(\n        \"Свойство popout устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n    modal &&\n      warn(\n        \"Свойство modal устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n  }\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName(\"Root\", platform), {\n        \"Root--transition\": !disableAnimation && transition,\n        \"Root--no-motion\": disableAnimation,\n      })}\n    >\n      {views.map((view) => {\n        const viewId = getNavId(view.props, warn);\n        if (viewId !== activeView && !(transition && viewId === prevView)) {\n          return null;\n        }\n        const isTransitionTarget =\n          transition && viewId === (isBack ? prevView : activeView);\n        const compensateScroll =\n          transition &&\n          (viewId === prevView || (isBack && viewId === activeView));\n        return (\n          <div\n            key={viewId}\n            ref={(e) => viewId && (viewNodes[viewId] = e)}\n            onAnimationEnd={isTransitionTarget ? onAnimationEnd : undefined}\n            vkuiClass={classNames(\"Root__view\", {\n              \"Root__view--hide-back\":\n                transition && viewId === prevView && isBack,\n              \"Root__view--hide-forward\":\n                transition && viewId === prevView && !isBack,\n              \"Root__view--show-back\":\n                transition && viewId === activeView && isBack,\n              \"Root__view--show-forward\":\n                transition && viewId === activeView && !isBack,\n              \"Root__view--active\": !transition && viewId === activeView,\n            })}\n          >\n            <NavTransitionProvider\n              entering={transition && viewId === activeView}\n            >\n              <div\n                vkuiClass=\"Root__scrollCompensation\"\n                style={{\n                  marginTop: compensateScroll\n                    ? viewId && -(scrolls[viewId] ?? 0)\n                    : undefined,\n                }}\n              >\n                {view}\n              </div>\n            </NavTransitionProvider>\n          </div>\n        );\n      })}\n      <AppRootPortal>\n        {!!popout && <div vkuiClass=\"Root__popout\">{popout}</div>}\n        {!!modal && <div vkuiClass=\"Root__modal\">{modal}</div>}\n      </AppRootPortal>\n    </div>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Root;\n"]},"metadata":{},"sourceType":"module"}