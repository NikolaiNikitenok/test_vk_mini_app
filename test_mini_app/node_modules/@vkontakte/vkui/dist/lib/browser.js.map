{"version":3,"sources":["../../src/lib/browser.ts"],"names":["detectIOS","System","memoized","computeBrowserInfo","userAgent","systemVersion","system","UNKNOWN","isIOS","iosMajor","iosMinor","IOS","major","minor","browserInfo"],"mappings":"AACA,SAASA,SAAT,QAA0B,iBAA1B;AAEA,WAAYC,MAAZ;;WAAYA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;GAAAA,M,KAAAA,M;;AAWZ,IAAMC,QAA0C,GAAG,EAAnD;AAEA,OAAO,SAASC,kBAAT,GAAyD;AAAA,MAA7BC,SAA6B,uEAAjB,EAAiB;;AAC9D,MAAIF,QAAQ,CAACE,SAAD,CAAZ,EAAyB;AACvB,WAAOF,QAAQ,CAACE,SAAD,CAAf;AACD;;AAED,MAAIC,aAA6B,GAAG,IAApC;AACA,MAAIC,MAAM,GAAGL,MAAM,CAACM,OAApB;;AAEA,mBAAsCP,SAAS,CAACI,SAAD,CAA/C;AAAA,MAAQI,KAAR,cAAQA,KAAR;AAAA,MAAeC,QAAf,cAAeA,QAAf;AAAA,MAAyBC,QAAzB,cAAyBA,QAAzB;;AAEA,MAAIF,KAAJ,EAAW;AACTF,IAAAA,MAAM,GAAGL,MAAM,CAACU,GAAhB;AACAN,IAAAA,aAAa,GAAG;AACdO,MAAAA,KAAK,EAAEH,QADO;AAEdI,MAAAA,KAAK,EAAEH;AAFO,KAAhB;AAID;;AAED,MAAMI,WAAwB,GAAG;AAC/BV,IAAAA,SAAS,EAATA,SAD+B;AAE/BE,IAAAA,MAAM,EAANA,MAF+B;AAG/BD,IAAAA,aAAa,EAAbA;AAH+B,GAAjC;AAMAH,EAAAA,QAAQ,CAACE,SAAD,CAAR,GAAsBU,WAAtB;AAEA,SAAOA,WAAP;AACD","sourcesContent":["import { Version } from \"../types\";\nimport { detectIOS } from \"@vkontakte/vkjs\";\n\nexport enum System {\n  IOS = \"ios\",\n  UNKNOWN = \"\",\n}\n\nexport interface BrowserInfo {\n  userAgent: string;\n  system: System;\n  systemVersion: Version | null;\n}\n\nconst memoized: { [index: string]: BrowserInfo } = {};\n\nexport function computeBrowserInfo(userAgent = \"\"): BrowserInfo {\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  let systemVersion: Version | null = null;\n  let system = System.UNKNOWN;\n\n  const { isIOS, iosMajor, iosMinor } = detectIOS(userAgent);\n\n  if (isIOS) {\n    system = System.IOS;\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor,\n    };\n  }\n\n  const browserInfo: BrowserInfo = {\n    userAgent,\n    system,\n    systemVersion,\n  };\n\n  memoized[userAgent] = browserInfo;\n\n  return browserInfo;\n}\n"],"file":"browser.js"}