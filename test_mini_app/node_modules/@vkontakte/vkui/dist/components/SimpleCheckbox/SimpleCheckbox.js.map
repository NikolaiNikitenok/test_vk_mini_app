{"version":3,"sources":["../../../src/components/SimpleCheckbox/SimpleCheckbox.tsx"],"names":["React","Tappable","ACTIVE_EFFECT_DELAY","getClassName","classNames","IOS","VKCOM","Icon20CheckBoxOn","Icon20CheckBoxOff","Icon24CheckBoxOn","Icon24CheckBoxOff","Icon20CheckBoxIndetermanate","usePlatform","useAdaptivity","useExternRef","SizeType","warnOnce","warn","IS_DEV","process","env","NODE_ENV","SimpleCheckbox","props","className","style","getRootRef","getRef","indeterminate","defaultIndeterminate","onChange","restProps","sizeY","platform","inputRef","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","defaultChecked","disabled","COMPACT"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Tappable, { ACTIVE_EFFECT_DELAY } from \"../Tappable/Tappable\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS, VKCOM } from \"../../lib/platform\";\n\nimport {\n  Icon20CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOn,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from \"@vkontakte/icons\";\n\nimport { HasRef, HasRootRef } from \"../../types\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { SizeType } from \"../../hoc/withAdaptivity\";\nimport { warnOnce } from \"../../lib/warnOnce\";\n\nimport \"./SimpleCheckbox.css\";\n\nconst warn = warnOnce(\"SimpleCheckbox\");\nconst IS_DEV = process.env.NODE_ENV === \"development\";\n\nexport interface SimpleCheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement> {\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n}\n\nexport const SimpleCheckbox: React.FC<SimpleCheckboxProps> = (\n  props: SimpleCheckboxProps\n) => {\n  const {\n    className,\n    style,\n    getRootRef,\n    getRef,\n    indeterminate,\n    defaultIndeterminate,\n    onChange,\n    ...restProps\n  } = props;\n  const { sizeY } = useAdaptivity();\n  const platform = usePlatform();\n  const inputRef = useExternRef(getRef);\n\n  React.useEffect(() => {\n    const indeterminateValue =\n      indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: SimpleCheckboxProps[\"onChange\"] = React.useCallback(\n    (event) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef]\n  );\n\n  if (IS_DEV) {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn(\n        \"defaultIndeterminate and defaultChecked cannot be true at the same time\"\n      );\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn(\"indeterminate and checked cannot be true at the same time\");\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      vkuiClass={classNames(\n        getClassName(\"SimpleCheckbox\", platform),\n        `SimpleCheckbox--sizeY-${sizeY}`\n      )}\n      className={className}\n      style={style}\n      disabled={restProps.disabled}\n      activeMode={platform === VKCOM ? \"SimpleCheckbox--active\" : \"background\"}\n      hoverMode={platform === VKCOM ? \"SimpleCheckbox--hover\" : \"background\"}\n      activeEffectDelay={platform === IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n    >\n      <input\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        vkuiClass=\"SimpleCheckbox__input\"\n        ref={inputRef}\n      />\n      <div vkuiClass=\"SimpleCheckbox__container\">\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--on\">\n          {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n            <Icon20CheckBoxOn />\n          ) : (\n            <Icon24CheckBoxOn />\n          )}\n        </div>\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--off\">\n          {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n            <Icon20CheckBoxOff />\n          ) : (\n            <Icon24CheckBoxOff />\n          )}\n        </div>\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--indeterminate\">\n          <Icon20CheckBoxIndetermanate\n            width={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n            height={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n          />\n        </div>\n      </div>\n      {platform === VKCOM && (\n        <div aria-hidden={true} vkuiClass=\"SimpleCheckbox__activeShadow\" />\n      )}\n      {platform === VKCOM && (\n        <div aria-hidden={true} vkuiClass=\"SimpleCheckbox__hoverShadow\" />\n      )}\n    </Tappable>\n  );\n};\n"],"file":"SimpleCheckbox.js"}