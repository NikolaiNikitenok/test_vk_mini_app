{"version":3,"sources":["../../../src/lib/accessibility.ts"],"names":["FOCUSABLE_ELEMENTS_LIST","Keys","ACCESSIBLE_KEYS","code","ENTER","key","keyCode","SPACE","TAB","ESCAPE","pressedKey","e","find","includes","shouldTriggerClickOnEnterOrSpace","el","target","tagName","role","getAttribute","isValidKeyboardEventTarget","isContentEditable","isNativeAnchorEl","hasAttribute","keyPressed"],"mappings":";;;;;;;;AAEO,IAAMA,uBAAuB,GAAG,CACrC,SADqC,EAErC,YAFqC,EAGrC,6EAHqC,EAIrC,yDAJqC,EAKrC,0BALqC,EAMrC,wBANqC,EAOrC,QAPqC,EAQrC,OARqC,EASrC,OATqC,EAUrC,mBAVqC,EAWrC,iCAXqC,CAAhC;;IAcKC,I;;;WAAAA,I;AAAAA,EAAAA,I;AAAAA,EAAAA,I;AAAAA,EAAAA,I;AAAAA,EAAAA,I;GAAAA,I,oBAAAA,I;;AAaZ,IAAMC,eAAgC,GAAG,CACvC;AACEC,EAAAA,IAAI,EAAEF,IAAI,CAACG,KADb;AAEEC,EAAAA,GAAG,EAAE,CAAC,OAAD,CAFP;AAGEC,EAAAA,OAAO,EAAE;AAHX,CADuC,EAMvC;AACEH,EAAAA,IAAI,EAAEF,IAAI,CAACM,KADb;AAEEF,EAAAA,GAAG,EAAE,CAAC,OAAD,EAAU,UAAV,EAAsB,GAAtB,CAFP;AAGEC,EAAAA,OAAO,EAAE;AAHX,CANuC,EAWvC;AACEH,EAAAA,IAAI,EAAEF,IAAI,CAACO,GADb;AAEEH,EAAAA,GAAG,EAAE,CAAC,KAAD,CAFP;AAGEC,EAAAA,OAAO,EAAE;AAHX,CAXuC,EAgBvC;AACEH,EAAAA,IAAI,EAAEF,IAAI,CAACQ,MADb;AAEEJ,EAAAA,GAAG,EAAE,CAAC,QAAD,CAFP;AAGEC,EAAAA,OAAO,EAAE;AAHX,CAhBuC,CAAzC;;AAuBO,SAASI,UAAT,CACLC,CADK,EAEL;AAAA;;AACA,SACE,0BAAAT,eAAe,CAACU,IAAhB,CACE;AAAA,QAAGP,GAAH,QAAGA,GAAH;AAAA,QAAQC,OAAR,QAAQA,OAAR;AAAA,WAAsBD,GAAG,CAACQ,QAAJ,CAAaF,CAAC,CAACN,GAAf,KAAuBC,OAAO,KAAKK,CAAC,CAACL,OAA3D;AAAA,GADF,iFAEGH,IAFH,KAEW,IAHb;AAKD;;AAEM,SAASW,gCAAT,CACLH,CADK,EAEL;AACA,MAAMI,EAAE,GAAGJ,CAAC,CAACK,MAAb;AACA,MAAQC,OAAR,GAAoBF,EAApB,CAAQE,OAAR;AAEA,MAAMC,IAAI,GAAGH,EAAE,CAACI,YAAH,CAAgB,MAAhB,CAAb;AAEA,MAAMC,0BAAmC,GACvCL,EAAE,CAACM,iBAAH,KAAyB,IAAzB,IACAJ,OAAO,KAAK,OADZ,IAEAA,OAAO,KAAK,UAFZ,KAGCC,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,MAH/B,CADF;AAMA,MAAMI,gBAAgB,GAAGL,OAAO,KAAK,GAAZ,IAAmBF,EAAE,CAACQ,YAAH,CAAgB,MAAhB,CAA5C;AACA,MAAMC,UAAU,GAAGd,UAAU,CAACC,CAAD,CAA7B;AAEA,SACES,0BAA0B,MAC1B;AACEI,EAAAA,UAAU,KAAKvB,IAAI,CAACM,KAApB,IAA6BW,IAAI,KAAK,QAAvC,IACC;AACCM,EAAAA,UAAU,KAAKvB,IAAI,CAACG,KAApB,IAA6B,CAACkB,gBAJP,CAD5B;AAOD","sourcesContent":["import * as React from \"react\";\n\nexport const FOCUSABLE_ELEMENTS_LIST = [\n  \"a[href]\",\n  \"area[href]\",\n  'input:not([disabled]):not([hidden]):not([type=\"hidden\"]):not([aria-hidden])',\n  \"select:not([disabled]):not([hidden]):not([aria-hidden])\",\n  \"textarea:not([disabled])\",\n  \"button:not([disabled])\",\n  \"iframe\",\n  \"audio\",\n  \"video\",\n  \"[contenteditable]\",\n  '[tabindex]:not([tabindex=\"-1\"])',\n];\n\nexport enum Keys {\n  ENTER = \"Enter\",\n  SPACE = \"Space\",\n  TAB = \"Tab\",\n  ESCAPE = \"Escape\",\n}\n\ninterface AccessibleKey {\n  code: Keys;\n  key: string[];\n  keyCode: number;\n}\n\nconst ACCESSIBLE_KEYS: AccessibleKey[] = [\n  {\n    code: Keys.ENTER,\n    key: [\"Enter\"],\n    keyCode: 13,\n  },\n  {\n    code: Keys.SPACE,\n    key: [\"Space\", \"Spacebar\", \" \"],\n    keyCode: 32,\n  },\n  {\n    code: Keys.TAB,\n    key: [\"Tab\"],\n    keyCode: 9,\n  },\n  {\n    code: Keys.ESCAPE,\n    key: [\"Escape\"],\n    keyCode: 27,\n  },\n];\n\nexport function pressedKey(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLElement>\n) {\n  return (\n    ACCESSIBLE_KEYS.find(\n      ({ key, keyCode }) => key.includes(e.key) || keyCode === e.keyCode\n    )?.code || null\n  );\n}\n\nexport function shouldTriggerClickOnEnterOrSpace(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLElement>\n) {\n  const el = e.target as HTMLElement;\n  const { tagName } = el;\n\n  const role = el.getAttribute(\"role\");\n\n  const isValidKeyboardEventTarget: boolean =\n    el.isContentEditable !== true &&\n    tagName !== \"INPUT\" &&\n    tagName !== \"TEXTAREA\" &&\n    (role === \"button\" || role === \"link\");\n\n  const isNativeAnchorEl = tagName === \"A\" && el.hasAttribute(\"href\");\n  const keyPressed = pressedKey(e);\n\n  return (\n    isValidKeyboardEventTarget &&\n    // trigger buttons on Space\n    ((keyPressed === Keys.SPACE && role === \"button\") ||\n      // trigger non-native links and buttons on Enter\n      (keyPressed === Keys.ENTER && !isNativeAnchorEl))\n  );\n}\n"],"file":"accessibility.js"}