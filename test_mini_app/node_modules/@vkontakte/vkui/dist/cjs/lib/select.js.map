{"version":3,"sources":["../../../src/lib/select.ts"],"names":["findAllIncludes","target","search","includes","i","indexOf","push","letterRegexp","RegExp","e","defaultFilterFn","query","option","getOptionLabel","label","toLocaleLowerCase","startsWith","index","test","length"],"mappings":";;;;;;;;;;;AAOA,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,GAA8B;AAAA,MAA7BC,MAA6B,uEAApB,EAAoB;AAAA,MAAhBC,MAAgB,uEAAP,EAAO;AACpD,MAAMC,QAAQ,GAAG,EAAjB;AAEA,MAAIC,CAAC,GAAGH,MAAM,CAACI,OAAP,CAAeH,MAAf,CAAR;;AACA,SAAOE,CAAC,KAAK,CAAC,CAAd,EAAiB;AACfD,IAAAA,QAAQ,CAACG,IAAT,CAAcF,CAAd;AACAA,IAAAA,CAAC,GAAGH,MAAM,CAACI,OAAP,CAAeH,MAAf,EAAuBE,CAAC,GAAG,CAA3B,CAAJ;AACD;;AAED,SAAOD,QAAP;AACD,CAVD;;AAYA,IAAII,YAAJ,C,CAEA;;AACA,IAAI;AACFA,EAAAA,YAAY,GAAG,IAAIC,MAAJ,CAAW,QAAX,EAAqB,GAArB,CAAf;AACD,CAFD,CAEE,OAAOC,CAAP,EAAU,CAAE;;AAEP,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAI1B;AAAA;;AAAA,MAHHC,KAGG,uEAHK,EAGL;AAAA,MAFHC,MAEG;AAAA,MADHC,cACG,uEAD8B,UAACD,MAAD;AAAA,WAAYA,MAAM,CAACE,KAAnB;AAAA,GAC9B;AACHH,EAAAA,KAAK,GAAGA,KAAK,CAACI,iBAAN,EAAR;AACA,MAAID,KAAK,sBAAGD,cAAc,CAACD,MAAD,CAAjB,oDAAG,gBAAwBG,iBAAxB,EAAZ;;AAEA,MAAID,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEE,UAAP,CAAkBL,KAAlB,CAAJ,EAA8B;AAC5B,WAAO,IAAP;AACD;;AAED,MAAMR,QAAQ,GAAGH,eAAe,CAACc,KAAD,EAAQH,KAAR,CAAhC,CARG,CAUH;;AACA,MAAIJ,YAAY,IAAIO,KAApB,EAA2B;AAAA,6DACLX,QADK;AAAA;;AAAA;AACzB,0DAA8B;AAAA,YAAnBc,MAAmB;;AAC5B,YAAI,CAACV,YAAY,CAACW,IAAb,CAAkBJ,KAAK,CAACG,MAAK,GAAG,CAAT,CAAvB,CAAL,EAA0C;AACxC,iBAAO,IAAP;AACD;AACF;AALwB;AAAA;AAAA;AAAA;AAAA;AAM1B,GAND,MAMO;AACL;AACA,WAAOd,QAAQ,CAACgB,MAAT,GAAkB,CAAzB;AACD;;AAED,SAAO,KAAP;AACD,CA3BM","sourcesContent":["type Option = {\n  label?: string;\n  [index: string]: any;\n};\n\ntype GetOptionLabel = (option: Option) => string | undefined;\n\nconst findAllIncludes = (target = \"\", search = \"\") => {\n  const includes = [];\n\n  let i = target.indexOf(search);\n  while (i !== -1) {\n    includes.push(i);\n    i = target.indexOf(search, i + 1);\n  }\n\n  return includes;\n};\n\nlet letterRegexp: RegExp;\n\n// На момент написания флаг u не поддерживался рядом браузеров, поэтому добавили фоллбэк.\ntry {\n  letterRegexp = new RegExp(\"\\\\p{L}\", \"u\");\n} catch (e) {}\n\nexport const defaultFilterFn = (\n  query = \"\",\n  option: Option,\n  getOptionLabel: GetOptionLabel = (option) => option.label\n) => {\n  query = query.toLocaleLowerCase();\n  let label = getOptionLabel(option)?.toLocaleLowerCase();\n\n  if (label?.startsWith(query)) {\n    return true;\n  }\n\n  const includes = findAllIncludes(label, query);\n\n  // Ищем вхождение перед началом которого не буква\n  if (letterRegexp && label) {\n    for (const index of includes) {\n      if (!letterRegexp.test(label[index - 1])) {\n        return true;\n      }\n    }\n  } else {\n    // если regexp не поддерживается, то ищем любое вхождение\n    return includes.length > 0;\n  }\n\n  return false;\n};\n"],"file":"select.js"}