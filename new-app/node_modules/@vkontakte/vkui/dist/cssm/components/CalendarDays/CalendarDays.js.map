{"version":3,"sources":["../../../../src/components/CalendarDays/CalendarDays.tsx"],"names":["React","isSameDay","isSameMonth","CalendarDay","getDaysNames","getWeeks","LocaleProviderContext","classNames","Caption","CalendarDays","viewDate","value","weekStartsOn","onDayChange","isDaySelected","isDayActive","isDaySelectionEnd","isDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","isHintedDaySelectionStart","isHintedDaySelectionEnd","isDayFocused","isDayDisabled","size","showNeighboringMonth","props","locale","useContext","ref","useRef","useState","Date","now","weeks","useMemo","daysNames","handleDayChange","useCallback","date","current","focus","map","dayName","week","i","day","sameMonth","toISOString"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,UAAvC;AACA,SAASC,WAAT;AACA,SAASC,YAAT,EAAuBC,QAAvB;AACA,SAASC,qBAAT;AACA,SAASC,UAAT;AACA,SAASC,OAAT;AACA;AAuBA,OAAO,IAAMC,YAAyC,GAAG,SAA5CA,YAA4C,OAmBnD;AAAA,MAlBJC,QAkBI,QAlBJA,QAkBI;AAAA,MAjBJC,KAiBI,QAjBJA,KAiBI;AAAA,MAhBJC,YAgBI,QAhBJA,YAgBI;AAAA,MAfJC,WAeI,QAfJA,WAeI;AAAA,MAdJC,aAcI,QAdJA,aAcI;AAAA,MAbJC,WAaI,QAbJA,WAaI;AAAA,MAZJC,iBAYI,QAZJA,iBAYI;AAAA,MAXJC,mBAWI,QAXJA,mBAWI;AAAA,MAVJC,UAUI,QAVJA,UAUI;AAAA,MATJC,UASI,QATJA,UASI;AAAA,MARJC,WAQI,QARJA,WAQI;AAAA,MAPJC,yBAOI,QAPJA,yBAOI;AAAA,MANJC,uBAMI,QANJA,uBAMI;AAAA,MALJC,YAKI,QALJA,YAKI;AAAA,MAJJC,aAII,QAJJA,aAII;AAAA,MAHJC,IAGI,QAHJA,IAGI;AAAA,mCAFJC,oBAEI;AAAA,MAFJA,oBAEI,sCAFmB,KAEnB;AAAA,MADDC,KACC;;AACJ,MAAMC,MAAM,GAAG5B,KAAK,CAAC6B,UAAN,CAAiBvB,qBAAjB,CAAf;AACA,MAAMwB,GAAG,GAAG9B,KAAK,CAAC+B,MAAN,CAA6B,IAA7B,CAAZ;;AACA,wBAAc/B,KAAK,CAACgC,QAAN,CAAe,IAAIC,IAAJ,EAAf,CAAd;AAAA;AAAA,MAAOC,GAAP;;AAEA,MAAMC,KAAK,GAAGnC,KAAK,CAACoC,OAAN,CACZ;AAAA,WAAM/B,QAAQ,CAACK,QAAD,EAAWE,YAAX,CAAd;AAAA,GADY,EAEZ,CAACA,YAAD,EAAeF,QAAf,CAFY,CAAd;AAKA,MAAM2B,SAAS,GAAGrC,KAAK,CAACoC,OAAN,CAChB;AAAA,WAAMhC,YAAY,CAAC8B,GAAD,EAAMtB,YAAN,EAAoBgB,MAApB,CAAlB;AAAA,GADgB,EAEhB,CAACA,MAAD,EAASM,GAAT,EAActB,YAAd,CAFgB,CAAlB;AAKA,MAAM0B,eAAe,GAAGtC,KAAK,CAACuC,WAAN,CACtB,UAACC,IAAD,EAAgB;AAAA;;AACd3B,IAAAA,WAAW,CAAC2B,IAAD,CAAX;AAEA,oBAAAV,GAAG,CAACW,OAAJ,8DAAaC,KAAb;AACD,GALqB,EAMtB,CAAC7B,WAAD,CANsB,CAAxB;AASA,SACE,wCAASc,KAAT;AAAgB,IAAA,SAAS,EAAC,cAA1B;AAAyC,IAAA,GAAG,EAAEG;AAA9C,MACE;AACE,IAAA,SAAS,EAAEvB,UAAU,CACnB,mBADmB,oCAEQkB,IAFR;AADvB,KAMGY,SAAS,CAACM,GAAV,CAAc,UAACC,OAAD;AAAA,WACb,oBAAC,OAAD;AACE,MAAA,KAAK,EAAC,GADR;AAEE,MAAA,MAAM,EAAC,SAFT;AAGE,MAAA,SAAS,EAAC,uBAHZ;AAIE,MAAA,GAAG,EAAEA;AAJP,OAMGA,OANH,CADa;AAAA,GAAd,CANH,CADF,EAmBGT,KAAK,CAACQ,GAAN,CAAU,UAACE,IAAD,EAAOC,CAAP;AAAA,WACT;AACE,MAAA,SAAS,EAAEvC,UAAU,CACnB,mBADmB,oCAEQkB,IAFR,EADvB;AAKE,MAAA,GAAG,EAAEqB;AALP,OAOGD,IAAI,CAACF,GAAL,CAAS,UAACI,GAAD,EAAMD,CAAN,EAAY;AACpB,UAAME,SAAS,GAAG9C,WAAW,CAAC6C,GAAD,EAAMrC,QAAN,CAA7B;AACA,aACE,oBAAC,WAAD;AACE,QAAA,GAAG,EAAEqC,GAAG,CAACE,WAAJ,EADP;AAEE,QAAA,GAAG,EAAEF,GAFP;AAGE,QAAA,KAAK,EAAE9C,SAAS,CAAC8C,GAAD,EAAMb,GAAN,CAHlB;AAIE,QAAA,MAAM,EAAEnB,WAAW,CAACgC,GAAD,CAJrB;AAKE,QAAA,QAAQ,EAAET,eALZ;AAME,QAAA,MAAM,EAAE,CAACZ,oBAAD,IAAyB,CAACsB,SANpC;AAOE,QAAA,QAAQ,EAAExB,aAAa,CAACuB,GAAD,CAPzB;AAQE,QAAA,cAAc,EAAE9B,mBAAmB,CAAC8B,GAAD,EAAMD,CAAN,CARrC;AASE,QAAA,YAAY,EAAE9B,iBAAiB,CAAC+B,GAAD,EAAMD,CAAN,CATjC;AAUE,QAAA,oBAAoB,EAAEzB,yBAAF,aAAEA,yBAAF,uBAAEA,yBAAyB,CAAG0B,GAAH,EAAQD,CAAR,CAVjD;AAWE,QAAA,kBAAkB,EAAExB,uBAAF,aAAEA,uBAAF,uBAAEA,uBAAuB,CAAGyB,GAAH,EAAQD,CAAR,CAX7C;AAYE,QAAA,QAAQ,EAAEhC,aAAF,aAAEA,aAAF,uBAAEA,aAAa,CAAGiC,GAAH,CAZzB;AAaE,QAAA,OAAO,EAAExB,YAAY,CAACwB,GAAD,CAbvB;AAcE,QAAA,OAAO,EAAE7B,UAdX;AAeE,QAAA,OAAO,EAAEC,UAfX;AAgBE,QAAA,MAAM,EAAEC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAG2B,GAAH,CAhBrB;AAiBE,QAAA,SAAS,EAAEC,SAjBb;AAkBE,QAAA,IAAI,EAAEvB;AAlBR,QADF;AAsBD,KAxBA,CAPH,CADS;AAAA,GAAV,CAnBH,CADF;AAyDD,CApGM","sourcesContent":["import * as React from \"react\";\nimport { isSameDay, isSameMonth } from \"date-fns\";\nimport { CalendarDay } from \"../CalendarDay/CalendarDay\";\nimport { getDaysNames, getWeeks } from \"../../lib/calendar\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport \"./CalendarDays.css\";\n\nexport interface CalendarDaysProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onChange\"> {\n  value?: Date | Array<Date | null>;\n  viewDate: Date;\n  weekStartsOn: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  showNeighboringMonth?: boolean;\n  size?: \"s\" | \"m\";\n  onDayChange(value: Date): void;\n  isDayDisabled(value: Date): boolean;\n  isDaySelectionStart(value: Date, dayOfWeek: number): boolean;\n  isDaySelectionEnd(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionStart?(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionEnd?(value: Date, dayOfWeek: number): boolean;\n  isDayActive(value: Date): boolean;\n  isDayHinted?(value: Date): boolean;\n  isDaySelected?(value: Date): boolean;\n  isDayFocused(value: Date): boolean;\n  onDayEnter?(value: Date): void;\n  onDayLeave?(value: Date): void;\n}\n\nexport const CalendarDays: React.FC<CalendarDaysProps> = ({\n  viewDate,\n  value,\n  weekStartsOn,\n  onDayChange,\n  isDaySelected,\n  isDayActive,\n  isDaySelectionEnd,\n  isDaySelectionStart,\n  onDayEnter,\n  onDayLeave,\n  isDayHinted,\n  isHintedDaySelectionStart,\n  isHintedDaySelectionEnd,\n  isDayFocused,\n  isDayDisabled,\n  size,\n  showNeighboringMonth = false,\n  ...props\n}) => {\n  const locale = React.useContext(LocaleProviderContext);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [now] = React.useState(new Date());\n\n  const weeks = React.useMemo(\n    () => getWeeks(viewDate, weekStartsOn),\n    [weekStartsOn, viewDate]\n  );\n\n  const daysNames = React.useMemo(\n    () => getDaysNames(now, weekStartsOn, locale),\n    [locale, now, weekStartsOn]\n  );\n\n  const handleDayChange = React.useCallback(\n    (date: Date) => {\n      onDayChange(date);\n\n      ref.current?.focus();\n    },\n    [onDayChange]\n  );\n\n  return (\n    <div {...props} vkuiClass=\"CalendarDays\" ref={ref}>\n      <div\n        vkuiClass={classNames(\n          \"CalendarDays__row\",\n          `CalendarDays__row--size-${size}`\n        )}\n      >\n        {daysNames.map((dayName) => (\n          <Caption\n            level=\"1\"\n            weight=\"regular\"\n            vkuiClass=\"CalendarDays__weekday\"\n            key={dayName}\n          >\n            {dayName}\n          </Caption>\n        ))}\n      </div>\n\n      {weeks.map((week, i) => (\n        <div\n          vkuiClass={classNames(\n            \"CalendarDays__row\",\n            `CalendarDays__row--size-${size}`\n          )}\n          key={i}\n        >\n          {week.map((day, i) => {\n            const sameMonth = isSameMonth(day, viewDate);\n            return (\n              <CalendarDay\n                key={day.toISOString()}\n                day={day}\n                today={isSameDay(day, now)}\n                active={isDayActive(day)}\n                onChange={handleDayChange}\n                hidden={!showNeighboringMonth && !sameMonth}\n                disabled={isDayDisabled(day)}\n                selectionStart={isDaySelectionStart(day, i)}\n                selectionEnd={isDaySelectionEnd(day, i)}\n                hintedSelectionStart={isHintedDaySelectionStart?.(day, i)}\n                hintedSelectionEnd={isHintedDaySelectionEnd?.(day, i)}\n                selected={isDaySelected?.(day)}\n                focused={isDayFocused(day)}\n                onEnter={onDayEnter}\n                onLeave={onDayLeave}\n                hinted={isDayHinted?.(day)}\n                sameMonth={sameMonth}\n                size={size}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n};\n"],"file":"CalendarDays.js"}